(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00a5293c"],{4525:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"address-form"},[t("breadcrumb"),e._v(" "),t("div",{staticClass:"box"},[t("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),t("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"94px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"企业名称",prop:"companyName","label-width":"274px"}},[t("el-input",{model:{value:e.form.companyName,callback:function(a){e.$set(e.form,"companyName",a)},expression:"form.companyName"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"法定代表人",prop:"legalName","label-width":"274px"}},[t("el-input",{model:{value:e.form.legalName,callback:function(a){e.$set(e.form,"legalName",a)},expression:"form.legalName"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"法人证件号",prop:"legalIdcNum","label-width":"274px"}},[t("el-input",{model:{value:e.form.legalIdcNum,callback:function(a){e.$set(e.form,"legalIdcNum",a)},expression:"form.legalIdcNum"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"委托代理人姓名",prop:"managerName","label-width":"190px"}},[t("el-input",{attrs:{placeholder:"请输入委托代理人姓名"},model:{value:e.form.managerName,callback:function(a){e.$set(e.form,"managerName",a)},expression:"form.managerName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"代理人电话",prop:"managerPhone","label-width":"150px"}},[t("el-input",{staticStyle:{width:"290px"},attrs:{maxlength:"11",placeholder:"请填写联系方式"},model:{value:e.form.managerPhone,callback:function(a){e.$set(e.form,"managerPhone",a)},expression:"form.managerPhone"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"radio",attrs:{label:"是否预约刻章印章","label-width":"274px"}},[t("el-radio-group",{attrs:{disabled:""},model:{value:e.form.isReservationEngravedSeal,callback:function(a){e.$set(e.form,"isReservationEngravedSeal",a)},expression:"form.isReservationEngravedSeal"}},[t("el-radio",{attrs:{label:!0,border:""},on:{change:e.clearValidate}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1,border:""},on:{change:e.clearValidate}},[e._v("否")])],1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所在地区",prop:"addressArea","label-width":"120px"}},[t("el-cascader",{ref:"addressArea",attrs:{options:e.areaList,separator:" ",disabled:"",props:{expandTrigger:"hover"},placeholder:"请选择行政区划"},model:{value:e.form.addressArea,callback:function(a){e.$set(e.form,"addressArea",a)},expression:"form.addressArea"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"印章领取方式",prop:"receiveWay","label-width":"120px"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.receiveWay,callback:function(a){e.$set(e.form,"receiveWay",a)},expression:"form.receiveWay"}},e._l(e.useWays,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"刻章网点",prop:"engravedChapterOutlets","label-width":"120px"}})],1),e._v(" "),t("el-col",{attrs:{span:20}},[t("div",{staticClass:"seal-adress-box"},[t("div",{staticClass:"seal-adress-list"},[t("el-radio-group",{model:{value:e.form.engravedChapterOutlets,callback:function(a){e.$set(e.form,"engravedChapterOutlets",a)},expression:"form.engravedChapterOutlets"}},e._l(e.printsShopList,(function(a,r){return t("el-radio",{key:r,staticClass:"seal-adress-item",attrs:{label:a.outletsName}},[t("div",{staticClass:"seal-adress-text"},[t("div",{staticStyle:{color:"#000"}},[e._v(e._s(a.outletsName)),t("span",{staticStyle:{"font-size":"14px"}},[e._v("（"+e._s(a.outletsAddr)+"）")])]),e._v(" "),t("div",{staticStyle:{"margin-top":"10px",color:"#999","font-size":"15px"}},[t("span",[e._v("联系人："+e._s(a.outletsContactPerson)+" ")]),t("span",{staticStyle:{"margin-left":"20px"}},[e._v("联系电话："+e._s(a.outletsPhone))])])])])})),1)],1)])])],1),e._v(" "),t("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[t("el-button",{on:{click:function(a){return e.$router.go(-1)}}},[e._v("上一步")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("完成")])],1)],1)],1)],1)},s=[],l=(t("a481"),t("5530")),o=t("c7eb"),n=(t("96cf"),t("1da1")),i=t("6350"),c=t("365c"),u={components:{Breadcrumb:i["a"]},data:function(){var e=this.$utils.validateField;return{baseInfo:{},curArea:{},companyType:"",type:"",areaList:[],useWays:["大厅领取"],rules:{isReservationEngravedSeal:[{required:!0,message:"请选择是否预约刻章印章",trigger:"change"}],receiveWay:[{required:!0,message:"请选择领取方式",trigger:"change"}],engravedChapterOutlets:[{required:!0,message:"请选择刻章网点",trigger:"change"}],companyName:[{required:!0,message:"请填写企业名称",trigger:"blur"}],legalName:[{required:!0,message:"请填写法定代表人",trigger:"blur"}],legalIdcNum:[{required:!0,message:"请填写法人证件号",trigger:"blur"}],managerName:[{required:!0,message:"请填写委托代理人姓名",trigger:"blur"}],managerPhone:[{required:!0,message:"请填写代理人联系方式",trigger:"change"},{validator:e("mobile")}]},printsShopList:[],form:{isReservationEngravedSeal:!0,receiveWay:"大厅领取",engravedChapterOutlets:"",address:"",addressArea:[],addressAreaCode:"",companyName:"",legalName:"",legalIdcNum:"",managerName:"",managerPhone:""}}},computed:{},created:function(){},activated:function(){var e=this;this.type=this.$route.query.type,this.$utils.getLocalItem("baseInfo")&&(this.baseInfo=this.$utils.getLocalItem("baseInfo")),this.$utils.getLocalItem("curArea")&&(this.curArea=this.$utils.getLocalItem("curArea")),this.getAreaInfo().then(Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$utils.getItem("draftNumber")&&e.$store.dispatch("draft/getDraftDetail",e.$utils.getItem("draftNumber")).then(function(){var a=Object(n["a"])(Object(o["a"])().mark((function a(t){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.engravedSeal&&(r=t.engravedSeal,e.form=r);case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),e.form.addressAreaCode&&Object(c["N"])({areacode:e.form.addressAreaCode,serviceProvider:"刻章"}).then((function(a){e.printsShopList=a.data||[]}));case 2:case"end":return a.stop()}}),a)}))))},methods:{clearValidate:function(){this.$refs["form"].clearValidate()},handleSaveDraft:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,r){var s=Object(l["a"])(Object(l["a"])({},e.draftInfo),{},{engravedSeal:e.form,businessType:"2",showTips:a});e.$store.dispatch("draft/saveDraft",s).then((function(){t()})).catch((function(){r()}))}))},getAreaInfo:function(){var e=this;return new Promise((function(a){var t={inData:{},job:"HuBei_DistCode"};e.$utils.showLoading(),e.$api.startJob(t).then(function(){var t=Object(n["a"])(Object(o["a"])().mark((function t(r){var s,l,n,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.curArea.areaCode,l=e.curArea.areaLabel,n={label:e.curArea.district},i=r.outData.data.filter((function(a){return a.label.trim()===e.curArea.city})),i[0].children=i[0].children.filter((function(e){return e.label.trim()===n.label.trim()})),e.areaList=[{value:"420000",label:"湖北省",children:i}],n.code=i[0].children[0].value,console.log("area",n),console.log("arr",i),s.push(n.code),e.form.addressArea=s,l.push(n.label),e.form.address=l.join(" "),e.form.addressAreaCode=s[2],e.$utils.hideLoading(),a();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},handleNext:function(){var e=this;console.log(this.form),this.$refs["form"].validate(function(){var a=Object(n["a"])(Object(o["a"])().mark((function a(t){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t?(r={lltData:{managerName:e.form.managerName,managerPhone:e.form.managerPhone,channelToken:e.$utils.getLocalItem("token"),companyName:e.form.companyName,legalName:e.form.legalName,legalIdcNum:e.form.legalIdcNum,engravedSeal:e.form||{},addressArea:e.form.address}},console.log(r),Object(c["ob"])(r).then(function(){var a=Object(n["a"])(Object(o["a"])().mark((function a(t){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(500!==+t.errCode&&"faulted"!==t.state){a.next=3;break}return e.$loading().close(),a.abrupt("return",e.$utils.showError("提交失败，请重试！"));case 3:e.$utils.removeItem("authorization"),e.$utils.showSuccess("提交成功"),e.$router.replace("/");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())):e.$utils.showError("请按提示信息补充完整表单！");case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}},m=u,d=(t("4940"),t("2877")),p=Object(d["a"])(m,r,s,!1,null,"4b5676e4",null);a["default"]=p.exports},4940:function(e,a,t){"use strict";t("8545")},8545:function(e,a,t){}}]);