(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c729f04"],{"243e":function(e,t,s){"use strict";s("2943")},2943:function(e,t,s){},"4ad1":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"base-form"},[s("breadcrumb"),e._v(" "),s("div",{staticClass:"box"},[s("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),s("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:e.form,"label-width":"160px"}},[s("div",{staticClass:"business-box"},[s("div",{staticClass:"box-title"},[e._v("经济性质")]),e._v(" "),s("div",{staticClass:"box-content"},[s("el-button",{staticClass:"btn-jjxz",attrs:{type:0===e.form.economicNature?"primary":""},on:{click:function(t){e.form.economicNature=0}}},[e._v("企业")]),e._v(" "),s("el-button",{staticClass:"btn-jjxz",attrs:{type:1===e.form.economicNature?"primary":""},on:{click:function(t){e.form.economicNature=1}}},[e._v("个体工商户有字号")]),e._v(" "),s("el-button",{staticClass:"btn-jjxz",attrs:{type:2===e.form.economicNature?"primary":""},on:{click:function(t){e.form.economicNature=2}}},[e._v("个体工商户无字号")])],1)]),e._v(" "),s("div",{staticClass:"business-box ncenter"},[s("div",{staticClass:"box-title pt"},[e._v("主体业态")]),e._v(" "),s("div",{staticClass:"box-main"},e._l(e.form.mainForm,(function(t,n){return s("div",{key:n,staticClass:"box-content"},[s("el-button",{staticClass:"btn-ztyt",attrs:{type:t.isSel?"primary":""}},[e._v(e._s(t.name))]),e._v(" "),s("span",{staticClass:"parentheses"},[e._v("(")]),e._v(" "),e._l(t.childs,(function(n,i){return s("el-button",{key:i,staticClass:"btn-ztytChild",attrs:{type:n.isSel?"primary":""},on:{click:function(s){return e.handleMainChild(t.name,n.name)}}},[e._v(e._s(n.name))])})),e._v(" "),s("span",{staticClass:"parentheses"},[e._v(")")])],2)})),0)]),e._v(" "),s("div",{staticClass:"business-box ncenter"},[s("div",{staticClass:"box-title pt"},[e._v("经营项目")]),e._v(" "),s("div",{staticClass:"box-main"},e._l(e.form.projectForm,(function(t,n){return s("div",{key:n,staticClass:"box-content"},[s("el-button",{staticClass:"btn-ztyt",attrs:{type:t.isSel?"primary":""},on:{click:function(s){return e.handleProject(t.name)}}},[e._v(e._s(t.name))]),e._v(" "),t.isSel?[0!==t.childs.length?s("span",{staticClass:"parentheses"},[e._v("(")]):e._e(),e._v(" "),e._l(t.childs,(function(n,i){return s("el-button",{key:i,staticClass:"btn-ztytChild",attrs:{type:n.isSel?"primary":""},on:{click:function(s){return e.handleProjectChild(t.name,n.name,i)}}},[e._v(e._s(n.name))])})),e._v(" "),0!==t.childs.length?s("span",{staticClass:"parentheses"},[e._v(")")]):e._e()]:e._e()],2)})),0)]),e._v(" "),s("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[s("el-button",{on:{click:function(t){return e.handleSaveDraft(!0)}}},[e._v("暂存草稿")]),e._v(" "),s("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("上一步")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("下一步")])],1)],1)],1)],1)},i=[],a=(s("2fdb"),s("6762"),s("7f7f"),s("ac6a"),s("5530")),r=s("c7eb"),c=(s("96cf"),s("1da1")),o=s("6350"),l={components:{Breadcrumb:o["a"]},data:function(){return{bizName:"",companyType:"",form:{economicNature:0,mainForm:"supermarket"===this.$route.query.type?[{name:"食品销售经营者",isSel:!0,childs:[{name:"批发",isSel:!1},{name:"批零兼营",isSel:!1},{name:"含网络经营",isSel:!1},{name:"网络经营",isSel:!1},{name:"含自动售货",isSel:!1},{name:"自动售货",isSel:!1}]}]:"canteen"===this.$route.query.type?[{name:"单位食堂",isSel:!0,childs:[{name:"学校食堂",isSel:!1},{name:"托幼机构食堂",isSel:!1},{name:"养老机构食堂",isSel:!1},{name:"工地食堂",isSel:!1},{name:"含中央厨房",isSel:!1},{name:"含集体用餐配送",isSel:!1}]}]:[{name:"餐饮服务经营者",isSel:!0,childs:[{name:"小型",isSel:!1},{name:"中型",isSel:!1},{name:"大型",isSel:!1},{name:"特大型",isSel:!1},{name:"含网络经营",isSel:!1},{name:"集体用餐配送",isSel:!1},{name:"中央厨房",isSel:!1}]}],projectForm:[{name:"预包装食品销售",isSel:!1,childs:[{name:"含冷藏冷冻食品",isSel:!0},{name:"不含冷藏冷冻食品",isSel:!1}]},{name:"散装食品销售",isSel:!1,childs:[{name:"含冷藏冷冻食品",isSel:!0},{name:"不含冷藏冷冻食品",isSel:!1},{name:"含散装熟食",isSel:!0},{name:"不含散装熟食",isSel:!1}]},{name:"特殊食品销售",isSel:!1,childs:[{name:"保健食品",isSel:!1},{name:"特殊医学用途配方食品",isSel:!1},{name:"婴幼儿配方乳粉",isSel:!1},{name:"其他婴幼儿配方食品",isSel:!1}]},{name:"热食类食品制售",isSel:!1,childs:[]},{name:"冷食类食品制售",isSel:!1,childs:[]},{name:"生食类食品制售",isSel:!1,childs:[]},{name:"半成品类食品制售",isSel:!1,childs:[]},{name:"糕点类食品制售",isSel:!1,childs:[{name:"含裱花类糕点",isSel:!1},{name:"不含裱花类糕点",isSel:!0}]},{name:"自制饮品制售",isSel:!1,childs:[{name:"含自制生鲜乳饮品",isSel:!1},{name:"不含自制生鲜乳饮品",isSel:!0}]},{name:"其他类食品制售",isSel:!1,childs:[]},{name:"其他类食品销售",isSel:!1,childs:[]}]}}},computed:{draftInfo:function(){return this.$store.state.draft.draftInfo}},created:function(){var e=this;this.$utils.getItem("draftNumber")&&this.$store.dispatch("draft/getDraftDetail",this.$utils.getItem("draftNumber")).then(function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(s){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.business&&(e.form=s.business);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.bizName=this.$route.query.bizName},methods:{handleSaveDraft:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(s,n){var i=Object(a["a"])(Object(a["a"])({},e.draftInfo),{},{businessType:0===e.form.economicNature?"2":"1",business:e.form,showTips:t});e.$utils.getItem("draftNumber")||(i.nameApply={bizName:e.bizName,companyName:""}),console.log(i),e.$store.dispatch("draft/saveDraft",i).then((function(){s()})).catch((function(){n()}))}))},handleMainChild:function(e,t){var s=JSON.parse(JSON.stringify(this.form.mainForm));s.forEach((function(n,i){n.name===e&&n.childs.forEach((function(e,n){if(e.name===t){e.isSel=!e.isSel;var a=["小型","中型","大型","特大型"];a.includes(t)&&s[i].childs.forEach((function(e,s){e.name!==t&&a.includes(e.name)&&(e.isSel=!1)}))}}))})),this.form.mainForm=s},handleProject:function(e){var t=JSON.parse(JSON.stringify(this.form.projectForm));t.forEach((function(t,s){t.name===e&&(t.isSel=!t.isSel)})),this.form.projectForm=t},handleProjectChild:function(e,t,s){var n,i=JSON.parse(JSON.stringify(this.form.projectForm));switch(e){case"预包装食品销售":case"散装食品销售":n="含散装熟食"===t||"不含散装熟食"===t?["含散装熟食","不含散装熟食"]:["含冷藏冷冻食品","不含冷藏冷冻食品"];break;case"糕点类食品制售":n=["含裱花类糕点","不含裱花类糕点"];break;case"自制饮品制售":n=["含自制生鲜乳饮品","不含自制生鲜乳饮品"];break}i.forEach((function(s,a){s.name===e&&s.childs.forEach((function(s,r){if(s.name===t){var c=["预包装食品销售","散装食品销售","糕点类食品制售","自制饮品制售"];c.includes(e)?n.includes(t)&&(s.isSel||(s.isSel=!s.isSel),i[a].childs.forEach((function(e,s){e.name!==t&&n.includes(e.name)&&(e.isSel=!1)}))):s.isSel=!s.isSel}}))})),this.form.projectForm=i},submitForm:function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(){var t,s,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=!0,s=JSON.parse(JSON.stringify(this.form.projectForm)),s.forEach((function(e,s){e.isSel&&(t=!1)})),!t){e.next=5;break}return e.abrupt("return",this.$utils.showError("请先选择经营项目"));case 5:return e.next=7,this.handleSaveDraft();case 7:this.$utils.setItem("business",this.form),n="company",1===this.form.economicNature&&(n="person"),2===this.form.economicNature?this.$router.push({path:"/form/noNameApply",query:Object(a["a"])(Object(a["a"])({},this.$route.query),{},{type:"person",whatfrom:"jointOffice"})}):this.$router.push({path:"/form/nameApply",query:Object(a["a"])(Object(a["a"])({},this.$route.query),{},{type:n,whatfrom:"jointOffice"})});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=l,u=(s("243e"),s("2877")),f=Object(u["a"])(m,n,i,!1,null,"d12be706",null);t["default"]=f.exports},"7f7f":function(e,t,s){var n=s("86cc").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,r="name";r in i||s("9e1e")&&n(i,r,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})}}]);