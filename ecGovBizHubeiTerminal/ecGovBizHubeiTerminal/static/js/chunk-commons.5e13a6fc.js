(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0486":function(t,e,i){},"0d1f":function(t,e,i){},"1a34":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"help"},[i("div",{staticClass:"btn",on:{click:t.handleOpenHelpList}},[t._v("操作指引")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelpFileList,expression:"showHelpFileList"}],staticClass:"list",on:{click:t.handleOpenHelpFile}},t._l(t.list,(function(e){return i("span",{key:e.url,attrs:{"data-item":JSON.stringify(e)}},[t._v(t._s(e.name))])})),0)]),t._v(" "),i("el-dialog",{attrs:{title:t.iframeItem.name,visible:t.openIframeDialog,width:"70%",top:"8vh","destroy-on-close":"","modal-append-to-body":!1},on:{"update:visible":function(e){t.openIframeDialog=e}}},[i("embed",{attrs:{src:t.iframeItem.url,type:"application/pdf"}})])],1)},n=[],a=(i("6762"),i("2fdb"),{data:function(){return{helpDialogOpenFlag:!1,showHelpFileList:!1,openIframeDialog:!1,iframeItem:{},timeOut:null,list:[]}},created:function(){this.initList()},methods:{initList:function(){var t=window.location.host,e=[{url:"https://rong.wetruetech.cn/zhkb/gth.pdf",name:"智慧开办一体机个体户登记操作指引"},{url:"https://rong.wetruetech.cn/zhkb/nzqy.pdf",name:"智慧开办一体机内资企业登记操作指引"},{url:"https://rong.wetruetech.cn/zhkb/xcx.pdf",name:"智慧开办小程序操作指引"}];t.includes("jingzhou")&&(e=[{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/ytj.pdf",name:"荆州9210一体机操作指引"},{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/zww.pdf",name:"荆州9210政务网操作指引"},{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/xcx.pdf",name:"荆州9210小程序操作指引"}]),"通山县"===this.$utils.getLocalItem("curArea").district&&e.push({url:"https://rong.wetruetech.cn/zhkb/xcygzh.pdf",name:"小餐饮承诺告知书"}),this.list=e},handleOpenHelpList:function(){var t=this;this.showHelpFileList=!this.showHelpFileList,clearTimeout(this.timeOut),this.showHelpFileList&&(this.timeOut=setTimeout((function(){t.showHelpFileList=!1}),8e3))},handleOpenHelpFile:function(t){var e=JSON.parse(t.target.dataset.item);console.log(e),e.url&&(clearTimeout(this.timeOut),this.iframeItem=e,this.showHelpFileList=!1,this.openIframeDialog=!0)}}}),o=a,l=(i("729c"),i("2877")),r=Object(l["a"])(o,s,n,!1,null,"995981c4",null);e["a"]=r.exports},"1d52":function(t,e,i){"use strict";i("8af3")},"337e":function(t,e,i){"use strict";i("0486")},"44aa":function(t,e,i){},"5b49":function(t,e,i){"use strict";i("7fd7")},6350:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"breadcrumb w-1200"},[i("span",{on:{click:t.handleGoHome}},[t._v("首页")]),t._v(" "),i("span",[t._v(" >  ")]),t._v(" "),t.title?i("span",[t._v(t._s(t.title))]):i("span",[t._v(t._s(t.$route.query.bizName))])])},n=[],a={props:{title:{type:String,default:""}},methods:{handleGoHome:function(){this.$router.push("/")}}},o=a,l=(i("1d52"),i("2877")),r=Object(l["a"])(o,s,n,!1,null,"16fb1c93",null);e["a"]=r.exports},6453:function(t,e,i){},"729c":function(t,e,i){"use strict";i("899e")},"781b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loading-img",style:"width: "+t.width+"px;height: "+t.height+"px;"},[i("img",{attrs:{src:t.src,alt:"loading"}})])},n=[],a=i("0bdc"),o=i.n(a),l={props:{src:{type:String,default:o.a},width:{type:String,default:"96"},height:{type:String,default:"102"}},data:function(){return{}},mounted:function(){},methods:{}},r=l,c=(i("337e"),i("2877")),u=Object(c["a"])(r,s,n,!1,null,"4c85bcd0",null);e["a"]=u.exports},"7fd7":function(t,e,i){},"81f7":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-popover",{attrs:{placement:t.placement,trigger:"click"},on:{show:t.showCode,hide:t.hideCode},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"codeBox"},[i("vue-qr",{staticClass:"code",attrs:{text:t.codeText,size:200,"logo-src":t.imageUrl}}),t._v(" "),i("p",[t._v("请用微信扫码上传")]),t._v(" "),i("p",[t._v("（上传过程请勿关闭二维码）")])],1),t._v(" "),i("el-button",{staticClass:"codeBtn",attrs:{slot:"reference"},slot:"reference"},[t._v("扫码上传")])],1)],1)},n=[],a=i("c7eb"),o=(i("96cf"),i("1da1")),l=i("658f"),r=i.n(l),c=i("365c"),u={components:{vueQr:r.a},props:["placement","alias"],data:function(){return{codeText:"",token:"",ident:"",tipStatus:!1,visible:!1,imageUrl:""}},created:function(){this.token=window.localStorage.getItem("token"),this.ident=window.sessionStorage.getItem("ident")},methods:{showCode:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(){var e,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tipStatus=!1,e="https://scjg.hubei.gov.cn/zhkb/ecGovBizHubei/#/",i="".concat(e,"?type=5&token=").concat(this.token,"&ident=").concat(this.ident,"&alias=").concat(this.alias),"jysqbUrl"===this.alias&&(i+="&isXls=true",console.log("%c%s","color:blue","[Debug] ~ showCode ~ params",i)),this.codeText=i,t.next=7,Object(c["ub"])(this.ident);case 7:return this.openInterval(),t.abrupt("return");case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openInterval:function(){var t=this;console.log("---开启轮询---"),this.intervalID=setInterval(Object(o["a"])(Object(a["a"])().mark((function e(){var i,s,n,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["G"])(t.ident);case 2:if(i=e.sent,"成功"===i.errMsg&&"1"===i.errCode){e.next=5;break}return e.abrupt("return");case 5:if(s=i.outData&&i.outData.jobPackage.HB_QYKB_DRAFT.inData,0===s.files.length){e.next=21;break}if(t.hideCode(1),t.$emit("update",{data:s.files,type:s.type}),"personnel"!==s.type){e.next=21;break}if(n={},o={},!s.files[0].front){e.next=16;break}return e.next=15,t.getIdCardInfo(t.$utils.getFile(s.files[0].front),"正");case 15:n=e.sent;case 16:if(!s.files[0].back){e.next=20;break}return e.next=19,t.getIdCardInfo(t.$utils.getFile(s.files[0].back),"反");case 19:o=e.sent;case 20:t.$emit("setIdCard",[n,o]);case 21:case"end":return e.stop()}}),e)}))),3e3)},getIdCardInfo:function(t,e){var i=this;return new Promise((function(s){i.$utils.showLoading({text:"正在识别身份证".concat(e,"面，请稍后...")}),Object(c["H"])(t).then((function(t){i.$utils.hideLoading(),s(t.outData.cards)}))}))},hideCode:function(t){if(this.destroyInterval(),console.log("---关闭轮询---"),1===+t)return this.tipStatus=!0,this.visible=!1,void this.$utils.showSuccess("扫码上传已完成！");this.tipStatus||this.$utils.showWarn("扫码上传通道已关闭！")},destroyInterval:function(){clearInterval(this.intervalID),this.intervalID=null}}},d=u,h=(i("5b49"),i("2877")),p=Object(h["a"])(d,s,n,!1,null,null,null);e["a"]=p.exports},"899e":function(t,e,i){},"8af3":function(t,e,i){},"9f63":function(t,e,i){"use strict";i("0d1f")},a723:function(t,e,i){"use strict";i("44aa")},af20:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-header"},[s("div",{staticClass:"header"},[s("div",{staticClass:"left",style:"/"===t.$route.path?"":"cursor:pointer;",on:{click:t.handleGo}}),t._v(" "),s("div",{staticClass:"right"},[t.userInfo?s("div",{staticClass:"sign-out"},[s("span",{staticClass:"name"},[t._v(t._s(t.userInfo.name))]),t._v(" "),s("div",{staticClass:"out",on:{click:function(e){return t.signOut()}}},[t._v("退出")])]):s("div",{staticClass:"login",on:{click:t.login}},[t._v(t._s("test"===t.$route.query.mode?"人脸认证":"登录"))])])]),t._v(" "),t._m(0),t._v(" "),s("el-dialog",{attrs:{visible:t.loginDialogVisible,width:"25%",center:""},on:{"update:visible":function(e){t.loginDialogVisible=e},close:t.destroyInterval}},[s("div",{staticClass:"dialog"},[s("div",{staticClass:"dialog-title"},[t._v("扫码"+t._s("test"===t.$route.query.mode?"认证":"登录"))]),t._v(" "),s("vue-qr",{staticStyle:{"margin-top":"29px",width:"257px",height:"242px"},attrs:{text:t.codeUrl,size:200}}),t._v(" "),s("div",{staticClass:"dialog-tips"},[t._v("请使用微信扫码"+t._s("test"===t.$route.query.mode?"认证":"登录"))])],1)]),t._v(" "),t.isshow_button?s("el-button",{staticClass:"closeDiaolog",on:{click:t.close_hiddon}},[t._v("\n      取消登录\n     ")]):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.loginVisible,width:"600px",center:""},on:{"update:visible":function(e){t.loginVisible=e},close:t.destroyInterval}},[s("div",{staticClass:"dialog"},[s("div",{staticClass:"dialog-title",staticStyle:{"font-size":"18px","font-family":"Source Han Sans CN"}},[t._v("请用二代身份证读卡授权登录")]),t._v(" "),s("div",{staticClass:"login-type-box"},[s("div",{staticClass:"login-type",on:{click:function(e){return t.$router.push("/idCardGuide")}}},[s("img",{staticStyle:{width:"150px",height:"150px",margin:"10px"},attrs:{src:i("b3c2"),alt:""}}),t._v(" "),s("div",{staticClass:"dialog-tips"},[t._v("刷二代身份证")])])])])])],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-bottom"},[s("img",{attrs:{src:i("ec94"),alt:""}})])}],a=(i("7f7f"),i("a481"),i("6762"),i("2fdb"),i("658f")),o=i.n(a),l=i("ed08"),r={components:{vueQr:o.a},data:function(){return{isshow_button:!1,loginDialogVisible:!1,loginVisible:!1,codeUrl:"",uuid:"",intervalID:null}},computed:{userInfo:function(){return this.$store.state.login.userInfo},isZww:function(){return this.$utils.getItem("origin")&&this.$utils.getItem("origin").includes("湖北政务网")}},created:function(){this.$utils.getLocalItem("userInfo")&&this.$store.commit("login/SET_USER_INFO",this.$utils.getLocalItem("userInfo"))},beforeDestroy:function(){this.destroyInterval()},methods:{handleGo:function(){this.isZww||("test"!==this.$route.query.mode||"2021II-ZW-JZGXQ"!==this.$utils.getLocalItem("tId")?"/"!==this.$route.path&&this.$router.replace("/"):this.$router.replace("/quickHome?mode=test&tId=2021II-ZW-JZGXQ"))},login:function(){var t=this;"test"===this.$route.query.mode||this.isZww?(this.$utils.setLocalItem("mode","test"),this.loginDialogVisible=!0,this.$api.getUUID().then((function(e){if("1"===e.resultCode){t.uuid=e.data.uuid;var i="https://rong.wetruetech.cn".concat(t.$utils.getPrefix(),"/ecGovBizHubei/#/?type=4&uuid=").concat(t.uuid);return t.codeUrl=i,void(t.intervalID=setInterval(t.getRusult,5e3))}}))):(this.loginVisible=!0,this.$api.getUUID().then((function(e){if("1"===e.resultCode){t.uuid=e.data.uuid;var i="https://scjg.hubei.gov.cn/zhkb/ecGovBizHubei/#/?type=4&uuid=".concat(t.uuid);return t.codeUrl=i,void(t.intervalID=setInterval(t.getRusult,5e3))}})))},getRusult:function(){var t=this;console.log("this.loading",this.loading),this.$api.getScanCodeStatus(this.uuid).then((function(e){if("1"===e.resultCode&&1===+e.data.status)return l["b"].showLoading({text:"扫码成功..."}),void(t.isshow_button=!0);"1"===e.resultCode&&2===+e.data.status&&(t.$utils.setLocalItem("token",e.data.token),t.$utils.setLocalItem("expiryDate",(new Date).getTime()+864e5),l["b"].hideLoading(),l["b"].showSuccess("登录成功！"),t.loginDialogVisible=!1,t.loginVisible=!1,t.isshow_button=!1,t.destroyInterval(),t.getUserInfo(e.data.token)),10001===+e.resultCode&&(l["b"].showError("二维码已过期请重新生成新的二维码"),t.destroyInterval())}))},getUserInfo:function(t){var e=this;l["b"].showLoading({text:"正在获取用户信息..."}),this.$api.getUserInfo().then((function(t){if(l["b"].hideLoading(),"1"===t.resultCode){var i={name:t.data.name||"暂无",idNumber:t.data.idNumber};return e.$utils.setLocalItem("userInfo",i),void e.$store.commit("login/SET_USER_INFO",i)}var s="发生错误，请联系管理员！";l["b"].showError(t.resultMsg||s)}))},signOut:function(){this.$utils.removeLocalItem("token"),this.$utils.removeLocalItem("userInfo"),this.$store.commit("login/SET_USER_INFO",null),this.$utils.showSuccess("退出登录成功");var t=this.$utils.getItem("origin");sessionStorage.clear(),this.$utils.setItem("origin",t),this.$utils.removeLocalItem("bizCode"),this.handleGo()},destroyInterval:function(){clearInterval(this.intervalID),this.intervalID=null},close_hiddon:function(){this.destroyInterval(),l["b"].hideLoading(),this.isshow_button=!1,history.go(0)}}},c=r,u=(i("a723"),i("2877")),d=Object(u["a"])(c,s,n,!1,null,"285f055a",null);e["a"]=d.exports},bea6:function(t,e,i){"use strict";i("6453")},d408:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"photo-box"},[s("page-header",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"photo-page-header"}),t._v(" "),"single"===t.type?s("div",{staticClass:"pic",on:{click:t.handleGo}},[s("div",{staticClass:"logo"},[t.path.toLowerCase().indexOf("pdf")>-1?[s("embed",{staticStyle:{overflow:"hidden"},attrs:{src:t.$utils.getFile(t.path),type:"application/pdf"}})]:[s("img",{attrs:{src:t.path?t.$utils.getFile(t.path):t.defaultImage}})]],2),t._v(" "),s("div",{staticClass:"desc"},[s("img",{attrs:{src:i("c5c7")}}),t._v(" "),s("span",[t._v(t._s(t.singleTips))])])]):s("el-button",{staticClass:"camera-btn",on:{click:t.handleGo}},[t._v("拍照上传")]),t._v(" "),t.showGuide?s("div",{staticClass:"guide-box"},[s("div",{staticClass:"camera-guide"},[s("div",{staticClass:"title"},[t._v("请将需要拍照的文件横向放入扫描入口")]),t._v(" "),s("img",{attrs:{src:i("0e59"),alt:""}}),t._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showGuide=!1,t.show=!1}}},[t._v("取消拍照")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.handleNext}},[t._v("下一步")])],1)])]):t._e(),t._v(" "),t.showCamera?s("div",{staticClass:"camera-box"},[s("div",{staticClass:"box"},[s("div",{staticClass:"tips"},[t._v(t._s("single"===t.type?"请将证件放置在框内":"请将文件横向放置在白框内"))]),t._v(" "),"MD"===t.device||"ZW"===t.device||"HDY"===t.device?s("div",{staticClass:"camera md_camera"},[s("img",{attrs:{id:"photo",src:t.mdImgPath}})]):s("div",{staticClass:"camera"})]),t._v(" "),t.filePaths.length?s("div",{staticClass:"photos"},t._l(t.filePaths,(function(e,i){return s("div",{key:i},[s("img",{attrs:{src:t.$utils.getFile(e),alt:""}}),t._v(" "),s("div",{on:{click:function(e){return t.handleDel(i)}}},[t._v("删除")])])})),0):t._e(),t._v(" "),"single"===t.type&&t.path?s("div",{staticClass:"photos",staticStyle:{"justify-content":"center"}},[s("div",[s("img",{attrs:{src:t.$utils.getFile(t.path),alt:""}}),t._v(" "),s("div",{on:{click:function(e){return t.handleDel(-1)}}},[t._v("删除")])])]):t._e(),t._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.handleCancel}},[t._v("取消拍照")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.handleBegin}},[t._v("点击拍照")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){return t.handleComplete("success")}}},[t._v("完成拍照")])],1)]):t._e(),t._v(" "),!t.isConstitutionPdf&&t.filePaths.length>0&&"single"!==t.type?s("div",{staticClass:"img-list"},t._l(t.filePaths,(function(e,i){return s("div",{key:e,staticClass:"list"},[t.judgeIsPdf(e)?s("div",{staticClass:"pdf",on:{click:function(i){return t.handlePreviewFile(e)}}},[s("pdf",{staticClass:"preview",staticStyle:{overflow:"hidden"},attrs:{src:t.baseUrl+e}})],1):s("img",{staticClass:"preview",attrs:{src:t.$utils.getFile(e),alt:""},on:{click:function(i){return t.handlePreviewFile(e)}}}),t._v(" "),s("span",{staticClass:"del_button",on:{click:function(e){return t.handleDel(i)}}},[t._v("删除")])])})),0):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.isPicturePreview},on:{"update:visible":function(e){t.isPicturePreview=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),t.isConstitutionPdf?s("div",{staticClass:"btns"},[s("el-upload",{attrs:{action:"/","show-file-list":!1,"before-upload":t.beforeUpload,multiple:!1,disabled:t.loading,accept:".PDF"}},[s("el-button",{attrs:{loading:t.loading}},[t._v("本地上传")])],1),t._v(" "),s("div",{staticClass:"tips"},[t._v("支持PDF")])],1):t._e(),t._v(" "),t.isConstitutionPdf&&t.filePaths.length>0?s("div",{staticClass:"img-list"},t._l(t.filePaths,(function(e,i){return s("div",{key:e,staticClass:"list"},[s("div",{staticClass:"pdf",on:{click:function(i){return t.handlePreviewFile(e)}}},[s("pdf",{staticClass:"preview",staticStyle:{overflow:"hidden"},attrs:{src:t.baseUrl+e}})],1),t._v(" "),s("span",{staticClass:"del_button",on:{click:function(e){return t.handleDel(i)}}},[t._v("删除")])])})),0):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.isPdfPreview,width:"70%"},on:{"update:visible":function(e){t.isPdfPreview=e}}},[s("embed",{staticStyle:{overflow:"hidden",width:"100%",height:"500px"},attrs:{src:t.dialogPdfUrl,type:"application/pdf"}})])],1)},n=[],a=(i("a481"),i("c7eb")),o=(i("96cf"),i("1da1")),l=(i("6762"),i("2fdb"),i("2934")),r=i("3a53"),c=i.n(r),u=i("1a1d"),d=i("af20"),h=i("858e"),p=i("365c"),f={components:{PageHeader:d["a"],pdf:h["a"]},props:{filePaths:{type:Array,default:function(){return[]}},path:{type:String,default:""},singleTips:{type:String,default:""},defaultImage:{type:String,default:""},type:{type:String,default:"multiple"},isConstitutionPdf:{type:Boolean,default:!1}},data:function(){return{disabled:!0,show:!1,showGuide:!1,showCamera:!1,loading:!1,cachedPaths:[],isPicturePreview:!1,isPdfPreview:!1,dialogImageUrl:"",dialogPdfUrl:"",baseUrl:"",device:"",mdImgPath:c.a,timer:null,websock:null}},beforeDestroy:function(){var t=this.$utils.getLocalItem("tId");"MD"===this.device||t.includes("MD")?(clearInterval(this.timer),"single"===this.type&&Object(u["c"])(0)):"ZW"===this.device||"HDY"===this.device||t.includes("ZW")?this.websock.close():Object(u["q"])()},mounted:function(){var t=this.$utils.getLocalItem("tId");this.baseUrl=window.location.origin+"".concat(this.$utils.getPrefix(),"/open-platform/"),this.disabled=!0,this.device=this.$utils.getLocalItem("device")||"","ZW"===this.device||t.includes("ZW")},methods:{judgeIsPdf:function(t){var e=t.slice(-3);return"pdf"===e},handlePreviewFile:function(t){this.judgeIsPdf(t)?(this.isPdfPreview=!0,this.dialogPdfUrl=this.$utils.getFile(t)):(this.isPicturePreview=!0,this.dialogImageUrl=this.$utils.getFile(t))},handleGo:function(){"test"===this.$route.query.mode||this.$utils.getLocalItem("mode")||(this.showGuide=!0,this.show=!0)},handleNext:function(){this.showGuide=!1,this.showCamera=!0,this.disabled=!0,"single"===this.type?this.cachedPaths=[this.path]:this.cachedPaths=JSON.parse(JSON.stringify(this.filePaths)),this.handleOpen()},handleDel:function(t){"single"===this.type?(this.$emit("update:path",""),this.disabled=!0):(this.filePaths.splice(t,1),this.filePaths.length||(this.disabled=!0))},handleOpen:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(){var e,i,s=this;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$utils.showLoading({text:"正在打开高拍仪，请稍后"}),"MD"!==this.device&&!this.$utils.getLocalItem("tId").includes("MD")){t.next=16;break}return t.next=4,this.handleUsePromise(u["e"]);case 4:if(e=t.sent,!e.customErrCode){t.next=9;break}return t.abrupt("return",this.$utils.showError("连接设备失败！"));case 9:if(!+e.data){t.next=14;break}return t.next=12,this.handleUsePromise(u["g"]);case 12:i=t.sent,+i.returnCode||(this.$utils.hideLoading(),this.timer=setInterval(Object(o["a"])(Object(a["a"])().mark((function t(){var e;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.handleUsePromise(u["j"]);case 2:e=t.sent,+e.returnCode||(s.mdImgPath="data:image/jpg;base64,"+e.data.img);case 4:case"end":return t.stop()}}),t)}))),1e3),Object(u["c"])(0),"single"===this.type&&setTimeout((function(){Object(u["c"])(1)}),1e3));case 14:t.next=17;break;case 16:"ZW"===this.device||"HDY"===this.device||this.$utils.getLocalItem("tId").includes("ZW")?(this.init(),this.$utils.hideLoading()):setTimeout((function(){var t={};t="single"===s.type?{snType:2,x:640,y:184,width:640,height:480}:{snType:0,x:640,y:184,width:640,height:480},Object(u["t"])(t).then((function(t){s.$utils.hideLoading(),t.success||s.$utils.showError("打开高拍仪失败，请重试！")}))}),300);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleBegin:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(){var e,i,s,n,o=this;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("MD"!==this.device&&!this.$utils.getLocalItem("tId").includes("MD")){t.next=11;break}return t.next=3,this.handleUsePromise(u["i"]);case 3:e=t.sent,i=this.$utils.base64ToFile(e.data.img),s=new FormData,s.append("file",i),this.loading=!0,Object(l["a"])(s).then((function(t){o.loading=!1,"single"===o.type?(o.$emit("update:path",t.files.file),o.disabled=!1):(o.filePaths.push(t.files.file),o.disabled=!1)})).catch((function(){o.loading=!1,o.$utils.showError("拍照失败，请重试！")})),t.next=12;break;case 11:"ZW"===this.device||"HDY"===this.device||this.$utils.getLocalItem("tId").includes("ZW")?(console.log("拍照"),n=(new Date).getTime(),this.websock.send("bSetMode(3)"),this.websock.send("bSaveJPG(D:\\faceImage\\,".concat(n,")")),setTimeout((function(){Object(u["n"])().then((function(t){if(console.log(t),500!==t.flag){var e=t.data,i=o.$utils.base64ToFile(e),s=new FormData;s.append("file",i),o.loading=!0,Object(l["a"])(s).then((function(t){o.loading=!1,"single"===o.type?(o.$emit("update:path",t.files.file),o.disabled=!1):(o.filePaths.push(t.files.file),o.disabled=!1)}))}else o.$utils.showError(t.message)}))}),3e3)):Object(u["w"])().then((function(t){var e=o.$utils.base64ToFile(t.obj.snapImage),i=new FormData;i.append("file",e),o.loading=!0,Object(l["a"])(i).then((function(t){o.loading=!1,"single"===o.type?(o.$emit("update:path",t.files.file),o.disabled=!1):(o.filePaths.push(t.files.file),o.disabled=!1)})).catch((function(){o.loading=!1,o.$utils.showError("拍照失败，请重试！")}))}));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){"single"===this.type?this.$emit("update:path",this.cachedPaths[0]):this.filePaths=JSON.parse(JSON.stringify(this.cachedPaths)),this.handleComplete("cancel")},handleClose:function(){var t=this;this.$utils.showLoading({text:"正在关闭高拍仪，请稍后"}),"MD"===this.device||this.$utils.getLocalItem("tId").includes("MD")?("single"===this.type&&Object(u["c"])(0),Object(u["h"])().then((function(){t.$utils.hideLoading(),t.showGuide=!1,t.showCamera=!1,t.show=!1,t.mdImgPath=c.a}))):"ZW"===this.device||"HDY"===this.device||this.$utils.getLocalItem("tId").includes("ZW")?(this.$utils.hideLoading(),this.showGuide=!1,this.showCamera=!1,this.show=!1,this.mdImgPath=c.a,this.websock.send("bStopPlay()"),this.websock.onclose()):Object(u["q"])().then((function(){t.$utils.hideLoading(),t.showGuide=!1,t.showCamera=!1,t.show=!1}))},handleComplete:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){var i=this;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:"single"===this.type&&"cancel"!==e?(this.$utils.showLoading({text:"正在识别身份证信息，请稍后..."}),Object(p["H"])(this.$utils.getFile(this.path)).then((function(t){i.$utils.hideLoading(),i.$emit("setIdCard",t.outData.cards),i.handleClose()}))):this.handleClose();case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleUsePromise:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(s,n){t(i).then((function(t){s(t)})).catch((function(){e.$utils.showError("获取数据失败！"),s({customErrCode:"1"})}))}))},init:function(){var t=this;this.websock=new WebSocket("ws://127.0.0.1:1818"),this.websock.onopen=function(){console.log("websock连接状态："+t.websock.readyState),t.websock.send("vSetResolution(8)"),t.websock.send("bStartPlay"),t.websock.send("bStartPlayRotate(90)")},this.websock.onmessage=function(e){"BeginbStopPlaytrueEndbStopPlay"!==e.data&&(t.mdImgPath="data:image/jpg;base64,"+e.data)},this.websock.onclose=function(){console.log("websock连接状态："+t.websock.readyState)},this.websock.onerror=function(t){console.log(t)}},getImageBase64:function(t){return new Promise((function(e){var i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas");t.width=i.width,t.height=i.height;var s=t.getContext("2d");s.drawImage(i,0,0,i.width,i.height);var n=t.toDataURL().replace("data:image/png;base64,","");e(n)}}))}}},g=f,v=(i("bea6"),i("2877")),m=Object(v["a"])(g,s,n,!1,null,"0d951b58",null);e["a"]=m.exports},e329:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"help"},[i("div",{staticClass:"btn",on:{click:t.handleOpenHelpList}},[t._v("操作指引")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelpFileList,expression:"showHelpFileList"}],staticClass:"list",on:{click:t.handleOpenHelpFile}},t._l(t.list,(function(e){return i("span",{key:e.url,attrs:{"data-item":JSON.stringify(e)}},[t._v(t._s(e.name))])})),0)]),t._v(" "),i("el-dialog",{attrs:{title:t.iframeItem.name,visible:t.openIframeDialog,width:"70%",top:"8vh","destroy-on-close":"","modal-append-to-body":!1},on:{"update:visible":function(e){t.openIframeDialog=e}}},[i("embed",{attrs:{src:t.iframeItem.url,type:"application/pdf"}})])],1)},n=[],a=(i("6762"),i("2fdb"),{data:function(){return{helpDialogOpenFlag:!1,showHelpFileList:!1,openIframeDialog:!1,iframeItem:{},timeOut:null,list:[]}},created:function(){this.initList()},methods:{initList:function(){var t=window.location.host,e=[{url:"https://rong.wetruetech.cn/zhkb/gth.pdf",name:"智慧开办一体机个体户登记操作指引"},{url:"https://rong.wetruetech.cn/zhkb/nzqy.pdf",name:"智慧开办一体机内资企业登记操作指引"},{url:"https://rong.wetruetech.cn/zhkb/xcx.pdf",name:"智慧开办小程序操作指引"},{url:"https://rong.wetruetech.cn/zhkb/syqykbqlcfuzn.pdf",name:"企业开办全流程服务指南"}];t.includes("jingzhou")&&(e=[{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/ytj.pdf",name:"荆州9210一体机操作指引"},{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/zww.pdf",name:"荆州9210政务网操作指引"},{url:"https://qydj.scjgj.jingzhou.gov.cn/jz/xcx.pdf",name:"荆州9210小程序操作指引"}]),"通山县"===this.$utils.getLocalItem("curArea").district&&e.push({url:"https://rong.wetruetech.cn/zhkb/xcygzh.pdf",name:"小餐饮承诺告知书"}),"丹江口市"===this.$utils.getLocalItem("curArea").district&&(e.push({url:"https://rong.wetruetech.cn/zhkb/djkqykbqlcfwzn.pdf",name:"丹江口市企业开办全流程服务指南"}),e.push({url:"https://rong.wetruetech.cn/zhkb/ylt.pdf",name:"市场主体一链通模块操作指引手册"})),this.list=e},handleOpenHelpList:function(){var t=this;this.showHelpFileList=!this.showHelpFileList,clearTimeout(this.timeOut),this.showHelpFileList&&(this.timeOut=setTimeout((function(){t.showHelpFileList=!1}),8e3))},handleOpenHelpFile:function(t){var e=JSON.parse(t.target.dataset.item);console.log(e),e.url&&(clearTimeout(this.timeOut),this.iframeItem=e,this.showHelpFileList=!1,this.openIframeDialog=!0)}}}),o=a,l=(i("9f63"),i("2877")),r=Object(l["a"])(o,s,n,!1,null,"a10e4552",null);e["a"]=r.exports}}]);