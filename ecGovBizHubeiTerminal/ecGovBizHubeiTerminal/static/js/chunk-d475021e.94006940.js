(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d475021e"],{"0514":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-header"},[i("div",{staticClass:"header"},[i("div",{staticClass:"left",style:"/"===t.$route.path?"":"cursor:pointer;",on:{click:t.handleGo}},[i("img",{attrs:{src:n("9d64"),alt:""}}),t._v(" "),i("span",[t._v("自助企业档案查询平台")])]),t._v(" "),i("div",{staticClass:"right"},[t.userInfo?i("div",{staticClass:"sign-out"},[i("span",{staticClass:"name"},[t._v(t._s(t.userInfo.name))]),t._v(" "),i("div",{staticClass:"out",on:{click:function(e){return t.signOut()}}},[t._v("退出")])]):i("div",{staticClass:"login",on:{click:t.login}},[t._v(t._s("test"===t.$route.query.mode?"人脸认证":"登录"))])])]),t._v(" "),t._m(0),t._v(" "),i("el-dialog",{attrs:{visible:t.loginDialogVisible,width:"25%",center:""},on:{"update:visible":function(e){t.loginDialogVisible=e},close:t.destroyInterval}},[i("div",{staticClass:"dialog"},[i("div",{staticClass:"dialog-title"},[t._v("扫码"+t._s("test"===t.$route.query.mode?"认证":"登录"))]),t._v(" "),i("vue-qr",{staticStyle:{"margin-top":"29px",width:"257px",height:"242px"},attrs:{text:t.codeUrl,size:200}}),t._v(" "),i("div",{staticClass:"dialog-tips"},[t._v("请使用微信扫码"+t._s("test"===t.$route.query.mode?"认证":"登录"))])],1)]),t._v(" "),t.isshow_button?i("el-button",{staticClass:"closeDiaolog",on:{click:t.close_hiddon}},[t._v("\n    取消登录\n   ")]):t._e(),t._v(" "),i("el-dialog",{attrs:{visible:t.loginVisible,width:"600px",center:""},on:{"update:visible":function(e){t.loginVisible=e},close:t.destroyInterval}},[i("div",{staticClass:"dialog"},[i("div",{staticClass:"dialog-title",staticStyle:{"font-size":"18px","font-family":"Source Han Sans CN"}},[t._v("请用微信扫描二维码授权登录")]),t._v(" "),i("div",{staticClass:"login-type-box"},[i("div",{staticClass:"login-type"},[i("vue-qr",{staticStyle:{"margin-top":"29px",width:"175px",height:"175px"},attrs:{text:t.codeUrl,size:200}}),t._v(" "),i("div",{staticClass:"dialog-tips"},[t._v(t._s(t.$route.query.LoginTitle))]),t._v(" "),i("div",[t._v("法定代表人才能查看和打印证照（如不是法定代表人，请使用法定代表人登录）")])],1)])])])],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-bottom"},[i("img",{attrs:{src:n("ec94"),alt:""}})])}],r=(n("7f7f"),n("a481"),n("6762"),n("2fdb"),n("658f")),s=n.n(r),a=n("ed08"),u={components:{vueQr:s.a},data:function(){return{isshow_button:!1,loginDialogVisible:!1,loginVisible:!1,codeUrl:"",uuid:"",intervalID:null}},computed:{userInfo:function(){return this.$store.state.login.userInfo},isZww:function(){return this.$utils.getItem("origin")&&this.$utils.getItem("origin").includes("湖北政务网")}},created:function(){this.$utils.getLocalItem("userInfo")&&this.$store.commit("login/SET_USER_INFO",this.$utils.getLocalItem("userInfo"))},beforeDestroy:function(){this.destroyInterval()},methods:{handleGo:function(){"/selfDeclaration"!==this.$route.path&&this.$router.replace("/selfDeclaration")},login:function(){var t=this;"test"===this.$route.query.mode||this.isZww?(this.$utils.setLocalItem("mode","test"),this.loginDialogVisible=!0,this.$api.getUUID().then((function(e){if("1"===e.resultCode){t.uuid=e.data.uuid;var n="https://rong.wetruetech.cn".concat(t.$utils.getPrefix(),"/ecGovBizHubei/#/?type=4&uuid=").concat(t.uuid);return t.codeUrl=n,void(t.intervalID=setInterval(t.getRusult,5e3))}}))):(this.loginVisible=!0,this.$api.getUUID().then((function(e){if("1"===e.resultCode){t.uuid=e.data.uuid;var n="https://scjg.hubei.gov.cn/zhkb/ecGovBizHubei/#/?type=4&uuid=".concat(t.uuid);return t.codeUrl=n,void(t.intervalID=setInterval(t.getRusult,5e3))}})))},getRusult:function(){var t=this;console.log("this.loading",this.loading),this.$api.getScanCodeStatus(this.uuid).then((function(e){if("1"===e.resultCode&&1===+e.data.status)return a["b"].showLoading({text:"扫码成功..."}),void(t.isshow_button=!0);"1"===e.resultCode&&2===+e.data.status&&(t.$utils.setLocalItem("token",e.data.token),t.$utils.setLocalItem("expiryDate",(new Date).getTime()+864e5),a["b"].hideLoading(),a["b"].showSuccess("登录成功！"),t.loginDialogVisible=!1,t.loginVisible=!1,t.isshow_button=!1,t.destroyInterval(),t.getUserInfo(e.data.token)),10001===+e.resultCode&&(a["b"].showError("二维码已过期请重新生成新的二维码"),t.destroyInterval())}))},getUserInfo:function(t){var e=this;a["b"].showLoading({text:"正在获取用户信息..."}),this.$api.getUserInfo().then((function(t){if(a["b"].hideLoading(),"1"===t.resultCode){var n={name:t.data.name||"暂无",idNumber:t.data.idNumber};return e.$utils.setLocalItem("userInfo",n),void e.$store.commit("login/SET_USER_INFO",n)}var i="发生错误，请联系管理员！";a["b"].showError(t.resultMsg||i)}))},signOut:function(){this.$utils.removeLocalItem("token"),this.$utils.removeLocalItem("userInfo"),this.$store.commit("login/SET_USER_INFO",null),this.$utils.showSuccess("退出登录成功");var t=this.$utils.getItem("origin");sessionStorage.clear(),this.$utils.setItem("origin",t),this.$utils.removeLocalItem("bizCode"),this.handleGo()},destroyInterval:function(){clearInterval(this.intervalID),this.intervalID=null},close_hiddon:function(){this.destroyInterval(),a["b"].hideLoading(),this.isshow_button=!1,history.go(0)}}},c=u,l=(n("bfc0"),n("2877")),d=Object(l["a"])(c,i,o,!1,null,"69dfab45",null);e["a"]=d.exports},"0bdf":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-header"),t._v(" "),n("div",{staticClass:"camera-guide"},[n("div",{staticClass:"title"},[t._v("请点击右上方按钮登录")]),t._v(" "),n("img",{attrs:{src:"/static/img/idcard_guide.794e4cb7.gif",alt:""}}),t._v(" "),n("div",{staticClass:"btn-group"},[n("el-button",{attrs:{type:"primary"},on:{click:t.goBack}},[t._v("取消")])],1),t._v(" "),n("el-dialog",{attrs:{visible:t.showDialog,width:"598px","close-on-click-modal":"","close-on-press-escape":"","show-close":!1},on:{"update:visible":function(e){t.showDialog=e}}},[n("div",{staticClass:"dialog-qrcode text-center"},[n("div",{staticClass:"dialog-title"},[t._v("页面即将会在"),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.second))]),t._v("秒后自动退出，也可以点立即击退出按钮退出重试")]),t._v(" "),n("el-button",{staticClass:"auth-btn",on:{click:t.goBack}},[t._v("立即退出")])],1)])],1)],1)},o=[],r=n("1a1d"),s=n("0514"),a={name:"",components:{PageHeader:s["a"]},data:function(){return{second:30,showDialog:!1,timer:null}},mounted:function(){var t=this;this.clearTimer(),setTimeout((function(){t.getId()}),1e3)},beforeDestroy:function(){this.$utils.getLocalItem("device")||Object(r["x"])()},methods:{clearTimer:function(){clearInterval(this.timer)},getId:function(){var t=this,e=this.$utils.getLocalItem("device");"MD"===e?Object(r["f"])().then((function(e){+e.retCode?t.$utils.showError("打开读卡设备失败，请退出重试！"):Object(r["d"])().then((function(e){+e.retcode?t.$confirm("请确认身份证已放至读卡区","温馨提示",{confirmButtonText:"已放好",showCancelButton:!1,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){Object(r["b"])().then((function(e){+e.retcode||t.getId()}))})):(t.$utils.setItem("userInfo",e),t.$router.push("/face"))}))})).catch((function(){t.$utils.showError("打开读卡设备失败，请退出重试！")})):"ZW"===e||"HDY"===e?Object(r["o"])().then((function(e){if(500===e.flag)return t.$utils.showError(e.message),void t.$confirm("请确认身份证已放至读卡区","温馨提示",{confirmButtonText:"已放好",showCancelButton:!1,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){t.getId()}));Object(r["k"])().then((function(e){if(500===e.flag)return t.$utils.showError(e.message),void t.$confirm("请确认身份证已放至读卡区","温馨提示",{confirmButtonText:"已放好",showCancelButton:!1,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){t.getId()}));Object(r["m"])().then((function(e){if(500===e.flag)return t.$utils.showError(e.message),void t.$confirm("请确认身份证已放至读卡区","温馨提示",{confirmButtonText:"已放好",showCancelButton:!1,closeOnPressEscape:!1,closeOnClickModal:!1}).then((function(){t.getId()}));t.$utils.setItem("userInfo",e.data),t.$router.push("/face")}))}))})):Object(r["s"])().then((function(e){e.success?Object(r["x"])().then((function(){t.$utils.setItem("userInfo",e.obj),t.$router.push("/face")})):t.showError()})).catch((function(){t.showError()}))},showError:function(){var t=this;this.showDialog=!0,this.$utils.showError("身份证识别失败，请退出页面重新进入重试！"),this.timer=setInterval((function(){t.second--,0===t.second&&t.goBack()}),1e3),Object(r["x"])()},goBack:function(){this.clearTimer(),this.$router.push("/selfDeclaration")}}},u=a,c=(n("eb17"),n("2877")),l=Object(c["a"])(u,i,o,!1,null,"79f54fd1",null);e["default"]=l.exports},"1a1d":function(t,e,n){"use strict";var i=n("5530"),o=n("f2e8"),r=n.n(o),s=n("ed08");function a(t){var e=t.url,n=t.data,i=t.option;return e+=(e.indexOf("?")<0?"?":"&")+u(n),new Promise((function(t,o){n&&n.jsonpCallback&&(window[n.jsonpCallback]=function(e){e&&t(e),o(e)}),"MD"===s["b"].getLocalItem("device")&&(console.log(n,"data"),t(n)),r()(e,i)}))}function u(t){var e="";for(var n in t){var i=void 0===t[n]?"":t[n];e+="&"+n+"="+encodeURIComponent(i)}return e?e.substring(1):""}var c=n("4328"),l=n.n(c),d=n("2b0e"),f=n("dc02");function h(t){var e=t.url,n=t.data;return new Promise((function(t,i){d["default"].prototype.$jsonp(e,n).then((function(e){t(e)})).catch((function(t){i(t)}))}))}d["default"].use(f["a"]);var g=n("bc3a"),v=n.n(g),p=n("5c96"),m=v.a.create({withCredentials:!1,headers:{"Content-Type":"application/json"},timeout:6e4});m.interceptors.response.use((function(t){return t.data}),(function(t){return p["Loading"].service().close(),Object(s["g"])("网络繁忙，请稍后再试！"),Promise.reject(t)}));var b=m;n.d(e,"s",(function(){return I})),n.d(e,"x",(function(){return w})),n.d(e,"t",(function(){return $})),n.d(e,"q",(function(){return j})),n.d(e,"w",(function(){return k})),n.d(e,"v",(function(){return O})),n.d(e,"r",(function(){return x})),n.d(e,"u",(function(){return E})),n.d(e,"f",(function(){return y})),n.d(e,"b",(function(){return D})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return S})),n.d(e,"g",(function(){return G})),n.d(e,"j",(function(){return L})),n.d(e,"i",(function(){return B})),n.d(e,"c",(function(){return P})),n.d(e,"h",(function(){return U})),n.d(e,"o",(function(){return H})),n.d(e,"k",(function(){return q})),n.d(e,"m",(function(){return V})),n.d(e,"n",(function(){return z})),n.d(e,"l",(function(){return M})),n.d(e,"p",(function(){return R})),n.d(e,"a",(function(){return N}));var C="https://q.g4b.cn/zhkb",_="https://q.g4b.cn/zhkb";function I(){return a({url:C+"inteGration/hardwareControl/api/idcard",data:{timeout:60,jsonpCallback:"flightHandler"}})}function w(){return a({url:C+"inteGration/hardwareControl/api/stopIdcard",data:{jsonpCallback:"flightHandler"}})}function $(t){return a({url:C+"inteGration/hardwareControl/api/openSnCamera",data:Object(i["a"])(Object(i["a"])({picFormat:"JPG"},t),{},{jsonpCallback:"flightHandler"})})}function j(){return a({url:C+"inteGration/hardwareControl/api/closeSnCamera",data:{jsonpCallback:"flightHandler"}})}function k(){return a({url:C+"inteGration/hardwareControl/api/snCameraBeginSnap",data:{jsonpCallback:"flightHandler"}})}function O(t){return a({url:C+"inteGration/hardwareControl/api/printNew",data:Object(i["a"])(Object(i["a"])({},t),{},{jsonpCallback:"flightHandler"})})}function x(t){return a({url:"http://127.0.0.1:1234",data:Object(i["a"])(Object(i["a"])({},t),{},{times:60,jsonpCallback:"flightHandler"})})}function E(t){return a({url:"http://127.0.0.1:9988",data:Object(i["a"])(Object(i["a"])({},t),{},{jsonpCallback:"flightHandler"})})}function y(){return h({url:_+"OpenDevice",data:{Port:"100",Baud:"0"}})}function D(){return h({url:_+"CloseDevice"})}function T(){return h({url:_+"ReadMsg"})}function S(){return b({url:"http://127.0.0.1:8888/GetDeviceCount",method:"GET"})}function G(){return b({url:"http://127.0.0.1:8888/StartPreview",method:"GET",params:{dev_idx:0,res_id:0,pixfmt:"pixfmt"}})}function L(){return b({url:"http://127.0.0.1:8888/getFrame",method:"GET"})}function B(){return b({url:"http://127.0.0.1:8888/getPic",method:"GET",params:{savepath:"D://Test.jpg",quality:80}})}function P(t){return b({url:"http://127.0.0.1:8888/EnableDeskImage?enable=".concat(t),method:"GET"})}function U(){return b({url:"http://127.0.0.1:8888/StopPreview",method:"GET",params:{dev_idx:0}})}function H(){return b({url:"http://127.0.0.1:18889/api/connect",method:"GET"})}function q(){return b({url:"http://127.0.0.1:18889/api/disconnect",method:"post"})}function V(){return b({url:"http://127.0.0.1:18889/api/disconnect",method:"POST"})}function z(){return b({url:"http://127.0.0.1:9999/getImgBase64",method:"GET"})}function M(){return b({url:"http://127.0.0.1:9999/delAllFile ",method:"GET"})}function R(t){return t=l.a.stringify(t),b({url:"http://localhost:8080/Printer/",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}function N(t){return b({url:"http://localhost:9999/print",method:"GET",data:t})}},"6e6a":function(t,e,n){},"9d64":function(t,e,n){t.exports=n.p+"static/img/logo.8ddd193b.png"},bfc0:function(t,e,n){"use strict";n("6e6a")},cf92:function(t,e,n){},eb17:function(t,e,n){"use strict";n("cf92")},ec94:function(t,e,n){t.exports=n.p+"static/img/header_bottom_bg.2a215c97.png"}}]);