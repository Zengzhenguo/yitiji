(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee357700"],{"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("6b75");function n(e,t){if(e){if("string"==typeof e)return Object(a["a"])(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(e,t):void 0}}},2909:function(e,t,r){"use strict";var a=r("6b75");function n(e){if(Array.isArray(e))return Object(a["a"])(e)}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var i=r("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return n(e)||o(e)||Object(i["a"])(e)||u()}r.d(t,"a",(function(){return s}))},"4e7b":function(e,t,r){},"6b75":function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))},"7f7f":function(e,t,r){var a=r("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in n||r("9e1e")&&a(n,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},a580:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"base-form"},[r("breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"test"!==e.$route.query.mode,expression:"$route.query.mode !== 'test'"}]}),e._v(" "),r("div",{staticClass:"box"},[r("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),r("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"94px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"radio",attrs:{label:"经营有效期","label-width":"100px"}},[r("el-radio",{attrs:{label:"长期",border:""},model:{value:e.form.validDates,callback:function(t){e.$set(e.form,"validDates",t)},expression:"form.validDates"}},[e._v("长期")]),e._v(" "),r("el-radio",{attrs:{label:"经营期限止",border:""},model:{value:e.form.validDates,callback:function(t){e.$set(e.form,"validDates",t)},expression:"form.validDates"}},[e._v("经营期限止")])],1)],1),e._v(" "),"经营期限止"===e.form.validDates?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":"0"}},[r("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择截止时间","picker-options":e.newDateOptions},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1):e._e()],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"出资额",required:""}},[r("el-select",{attrs:{placeholder:"请选择场所性质"},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}},[r("el-option",{attrs:{label:"人民币",value:"人民币"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{"label-width":"0",prop:"capital"}},[r("el-input",{attrs:{disabled:"内资企业辅助开办"===e.$route.query.bizName||"商事确认一链通"===e.$route.query.bizName,placeholder:"请输入内容"},on:{input:e.limitInput},model:{value:e.form.capital,callback:function(t){e.$set(e.form,"capital","string"===typeof t?t.trim():t)},expression:"form.capital"}},[r("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"从业人数",prop:"employeesCount"}},[r("el-input",{attrs:{placeholder:"请填写"},model:{value:e.form.employeesCount,callback:function(t){e.$set(e.form,"employeesCount","string"===typeof t?t.trim():t)},expression:"form.employeesCount"}},[r("template",{slot:"append"},[e._v("(人)")])],2)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"radio",attrs:{label:"核算方式",prop:"computedWays"}},[r("el-radio",{attrs:{label:"独立核算",border:""},model:{value:e.form.computedWays,callback:function(t){e.$set(e.form,"computedWays",t)},expression:"form.computedWays"}},[e._v("独立核算")]),e._v(" "),r("el-radio",{attrs:{label:"非独立核算",border:""},model:{value:e.form.computedWays,callback:function(t){e.$set(e.form,"computedWays",t)},expression:"form.computedWays"}},[e._v("非独立核算")])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"营业执照副本数量","label-width":"148px"}},[r("el-select",{attrs:{placeholder:"请选择营业执照副本数量"},model:{value:e.form.licenseCount,callback:function(t){e.$set(e.form,"licenseCount",t)},expression:"form.licenseCount"}},[r("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"2",value:"2"}})],1)],1)],1)],1),e._v(" "),"person"!==e.$route.query.type?[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"radio",attrs:{label:"公司章程",prop:"constitutionType"}},[r("el-radio",{attrs:{label:"使用章程模板",border:""},model:{value:e.form.constitutionType,callback:function(t){e.$set(e.form,"constitutionType",t)},expression:"form.constitutionType"}},[e._v("使用章程模板")])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},["使用自有章程"===e.form.constitutionType?r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"radio",attrs:{label:""}},[r("upload-code",{attrs:{placement:"bottom-start",alias:"constitutionPdf"},on:{update:e.updateFileList}})],1)],1):e._e(),e._v(" "),"使用章程模板"===e.form.constitutionType?r("div",{staticClass:"radio_group_bottom"},[r("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){e.PDF.isOpen=!0}}},[e._v(e._s(e.constitutionName))])],1):e._e()],1)]:e._e(),e._v(" "),r("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[r("el-button",{on:{click:function(t){return e.$router.go(0)}}},[e._v("刷新当前页面")]),e._v(" "),r("el-button",{on:{click:function(t){return e.handleSaveDraft(!0)}}},[e._v("暂存草稿")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("上一步")]),e._v(" "),"person"===e.$route.query.type||"company"===e.$route.query.type?r("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步，生成表单预览")]):r("el-button",{attrs:{type:"primary"},on:{click:e.handleGoAppendPage}},[e._v("下一步")])],1)],2)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.PDF.isOpen,width:"60%"},on:{"update:visible":function(t){return e.$set(e.PDF,"isOpen",t)}}},[r("embed",{staticStyle:{overflow:"hidden",width:"100%",height:"500px"},attrs:{src:e.PDF.url,type:"application/pdf"}})])],1)},n=[],o=(r("7f7f"),r("28a5"),r("6762"),r("2fdb"),r("2909")),i=r("5530"),u=r("c7eb"),s=(r("96cf"),r("1da1")),c=(r("ac6a"),r("6350")),l=r("81f7"),f=r("365c"),p={components:{Breadcrumb:c["a"],UploadCode:l["a"]},data:function(){var e=this,t=function(t,r,a){var n={value:String(r)};n.value.indexOf(".")>=0&&(n.value.substring(0,n.value.indexOf(".")).length>12&&a(new Error("金额整数不能超过12位，小数部分不能超过6位")),n.value.substring(n.value.indexOf(".")+1,n.value.length).length>6&&a(new Error("金额整数不能超过12位，小数部分不能超过6位"))),n.value.indexOf(".")<0&&n.value.length>12&&a(new Error("金额整数不能超过12位，小数部分不能超过6位")),"曾都区"===e.$utils.getLocalItem("curArea").defaultValue[1]&&(console.log(111),r>=21&&"person"===e.$route.query.type&&e.$confirm("申请的注册资本不能大于20万元，请核对注册资本是否无误！","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){})).catch((function(){e.form.capital=null}))),r>=501&&"person"===e.$route.query.type&&e.$confirm("当前申请的注册资本过大，请核对注册资本是否无误！","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){})).catch((function(){e.form.capital=null})),a()};return{newDateOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},PDF:{isOpen:!1,uploadPdfData:[],url:""},form:{validDates:"长期",endTime:"",capital:"",currency:"人民币",employeesCount:"",computedWays:"独立核算",licenseCount:"1",constitutionType:"使用章程模板",constitutionPdf:""},rules:{capital:[{required:!0,message:"请填写注册资本",trigger:"change",pattern:/^[1-9]\d*$/},{required:!0,validator:t,trigger:"change"}],employeesCount:[{required:!0,message:"请填写从业人数",trigger:"change"}]}}},computed:{inidInfo:function(){return this.$store.state.indid.industryid},draftInfo:function(){return this.$store.state.draft.draftInfo},constitutionName:function(){var e=this.$utils.getItem("member"),t=this.$utils.getItem("nameApply"),r="一人有限责任公司"===t.companyType?"一人股东有限公司":"多人股东有限公司",a=e.visitors?"设监事会":"不设监事会",n=e.directors?"设董事会":"不设董事会";return"《公司章程模板》（"+r+"，"+n+a+"）"},capitalTotal:function(){var e=0;if(this.$utils.getItem("member")&&("company"===this.$route.query.type||"commercial"===this.$route.query.type||"9210commercial"===this.$route.query.type||"commercialRegister"===this.$route.query.type)){var t=this.$utils.getItem("member"),r=0;t.memberList.forEach((function(e){e.investors&&e.investorsList.forEach((function(e){r+=parseFloat(e.money)}))})),e=r}return e===+this.form.capital},constitutionPdfType:function(){var e=this.$utils.getItem("member"),t=this.$utils.getItem("nameApply"),r="HB_ZC_",a="一人有限责任公司"===t.companyType?"1R_":"DR_",n=e.directors?"SDSH_":"BSDSH_",o=e.visitors?"SJSH":"BSJSH";return r+a+n+o}},mounted:function(){var e=Object(s["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),activated:function(){var e=this;this.form.endTime=this.$utils.formatDate(new Date((new Date).getTime()+7776e6)),this.$utils.getItem("draftNumber")&&this.$store.dispatch("draft/getDraftDetail",this.$utils.getItem("draftNumber")).then(function(){var t=Object(s["a"])(Object(u["a"])().mark((function t(r){var a,n,o,i;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.otherInfo&&(e.form=r.otherInfo),!r.member||"company"!==e.$route.query.type&&"commercial"!==e.$route.query.type||(a=r.member,n=0,a.memberList.forEach((function(e){e.investors&&e.investorsList.forEach((function(e){n+=parseFloat(e.money)}))})),e.form.capital=n),"person"===e.$route.query.type){t.next=8;break}return o=e.constitutionPdfType,t.next=6,Object(f["B"])(o);case 6:i=t.sent,e.PDF.url=e.$utils.getFile(i.outData.pdf);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methods:{handleSaveDraft:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(r,a){var n=Object(i["a"])(Object(i["a"])({},e.draftInfo),{},{otherInfo:e.form,businessType:"person"===e.$route.query.type?"1":"2",showTips:t});e.$store.dispatch("draft/saveDraft",n).then((function(){r()})).catch((function(){a()}))}))},updateFileList:function(e){console.log(e);var t=[].concat(Object(o["a"])(this.PDF.uploadPdfData),Object(o["a"])(e.data));this.PDF.uploadPdfData=t},handleNext:function(){var e=this;console.log("form",this.form),this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(u["a"])().mark((function t(r){var a,n,o,s,c,l,p,m,d,b,y,h,v,$;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=38;break}if(a=e.draftInfo.nameApply,n=e.draftInfo.address,o=e.draftInfo.scope,s=e.draftInfo.member,c=JSON.parse(JSON.stringify(localStorage.getItem("industryid"))),c&&null!=c){t.next=8;break}return t.abrupt("return",e.$utils.showError("缺少industryid字段或为空,请重新提交"));case 8:if(a.companyAreaResult&&a.companyAreaResult.includes("湖北"),!(a.industryFormulated.indexOf("实业")>-1&&e.form.capital<1e4)){t.next=11;break}return t.abrupt("return",e.$utils.showWarn("设立实业公司注册资金必须大于或等于1亿元！"));case 11:if(!(e.form.capital<=0)){t.next=13;break}return t.abrupt("return",e.$utils.showWarn("企业注册资金必须大于0！"));case 13:if("person"===e.$route.query.type||e.capitalTotal){t.next=15;break}return t.abrupt("return",e.$utils.showWarn("企业注册资金需要等于各股东出资总额！"));case 15:if(!(e.PDF.uploadPdfData.length>1)){t.next=17;break}return t.abrupt("return",e.$utils.showWarn("公司章程PDF文件仅支持上传一份！"));case 17:if("使用章程模板"!==e.form.constitutionType){t.next=21;break}e.form.constitutionPdf="",t.next=24;break;case 21:if(e.PDF.uploadPdfData.length){t.next=23;break}return t.abrupt("return",e.$utils.showWarn("使用自有章程选项需要手动上传公司章程！"));case 23:e.form.constitutionPdf=e.PDF.uploadPdfData[0];case 24:return a.hasRepeatWayFlag&&(a.orgWay=""),l=Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},a),n),{},{scope:o},s),e.form),{},{endTime:"长期"===e.form.validDates?"":e.form.endTime,industryType:{IndustryCode:a.industryFormulated.split("-")[0],IndustryName:a.industryFormulated.split("-")[2],IndustryId:c},industryFormulated:a.industryFormulated.split("-")[1],area:a.area.join(" ")}),"person"!==e.$route.query.type||a.companyName||s.memberList.forEach((function(e){e.jobs.forEach((function(t){"主要经营者"===t.name&&(l.companyName=e.idcName)}))})),"jointOffice"===e.$route.query.whatfrom&&(p=e.draftInfo.equipment,m=e.draftInfo.personnel,d=e.draftInfo.uploadMaterial,b=e.draftInfo.business,y=b.mainForm,h=b.projectForm.filter((function(e){return e.isSel})),y.forEach((function(e){e.childs=e.childs.filter((function(e){return e.isSel}))})),h.forEach((function(e){e.childs=e.childs.filter((function(e){return e.isSel}))})),v={channel:"一体机",channelSource:"湖北市场监督融平台",channelToken:e.$utils.getLocalItem("token"),economicNature:b.economicNature,yslbData:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},m),p),d),{},{economicNature:b.economicNature,mainForm:y,projectForm:h})},Object.assign(l,v)),console.log("一事联办参数：",JSON.stringify(l)),t.next=31,e.handleSaveDraft();case 31:e.$utils.setItem("otherInfo",e.form),e.$loading({text:"正在获取pdf内容"}),$=JSON.parse(JSON.stringify(e.$utils.getItem("companyName"))),"person"===e.$route.query.type&&$&&(l.companyName=JSON.parse(JSON.stringify(e.$utils.getItem("companyName"))),l.companyName.includes("（个体工商户）")||(l.companyName=l.companyName+"（个体工商户）")),Object(f["Y"])(l,e.$route.query.whatfrom).then((function(t){if(e.$loading().close(),500===+t.errCode||"faulted"===t.state)return e.$utils.showError("生成失败，请重试！");e.$router.push({path:"/form/preview",query:Object(i["a"])(Object(i["a"])({},e.$route.query),{},{path:t.outData.pdf})})})),t.next=39;break;case 38:e.$utils.showError("请按提示信息补充完整表单！");case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleGoAppendPage:function(){var e=this;"commercial"!==this.$route.query.type&&"9210commercial"!==this.$route.query.type&&"commercialRegister"!==this.$route.query.type?this.$router.push("/form/condition?type=".concat(this.$route.query.type)):this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(u["a"])().mark((function t(r){var a,n,o,s,c,l,f;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=65;break}if(a=e.draftInfo.nameApply,n=e.draftInfo.address,o=e.draftInfo.scope,s=e.draftInfo.member,c=e.$utils.getLocalItem("industryid"),a.companyAreaResult&&a.companyAreaResult.includes("湖北"),!(a.industryFormulated.indexOf("实业")>-1&&e.form.capital<1e4)){t.next=9;break}return t.abrupt("return",e.$utils.showWarn("设立实业公司注册资金必须大于或等于1亿元！"));case 9:if(!(e.form.capital<=0)){t.next=11;break}return t.abrupt("return",e.$utils.showWarn("企业注册资金必须大于0！"));case 11:if("person"===e.$route.query.type||e.capitalTotal){t.next=13;break}return t.abrupt("return",e.$utils.showWarn("企业注册资金需要等于各股东出资总额！"));case 13:if(!(e.PDF.uploadPdfData.length>1)){t.next=15;break}return t.abrupt("return",e.$utils.showWarn("公司章程PDF文件仅支持上传一份！"));case 15:if("使用章程模板"!==e.form.constitutionType){t.next=19;break}e.form.constitutionPdf="",t.next=22;break;case 19:if(e.PDF.uploadPdfData.length){t.next=21;break}return t.abrupt("return",e.$utils.showWarn("使用自有章程选项需要手动上传公司章程！"));case 21:e.form.constitutionPdf=e.PDF.uploadPdfData[0];case 22:return l=Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},a),n),{},{scope:o},s),e.form),{},{endTime:"长期"===e.form.validDates?"":e.form.endTime,industryType:{IndustryCode:a.industryFormulated.split("-")[0],IndustryName:a.industryFormulated.split("-")[2],IndustryId:c},industryFormulated:a.industryFormulated.split("-")[1],area:a.area.join(" ")}),"person"!==e.$route.query.type||a.companyName||s.memberList.forEach((function(e){e.jobs.forEach((function(t){"主要经营者"===t.name&&(l.companyName=e.idcName)}))})),console.log("一事联办参数：",JSON.stringify(l)),t.next=27,e.handleSaveDraft();case 27:if(e.$utils.setItem("otherInfo",e.form),"硚口区"!==e.$utils.getLocalItem("curArea").district){t.next=31;break}return e.$router.push({path:"/form/businessHandling",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 31:if(f=e.draftInfo.businessShow,!f.gzchecked){t.next=35;break}return e.$router.push({path:"/form/seal",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 35:if(!f.sbchecked){t.next=38;break}return e.$router.push({path:"/form/socialSecurity",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 38:if(!f.swchecked){t.next=41;break}return e.$router.push({path:"/form/taxAdministration",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 41:if(!f.yhchecked){t.next=44;break}return e.$router.push({path:"/form/bankAccount",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 44:if(!f.gjjchecked){t.next=47;break}return e.$router.push({path:"/form/accumulationFund",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 47:if(!f.ylchecked){t.next=50;break}return e.$router.push({path:"/form/medicalInsurance",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 50:if(!f.sdqwchecked){t.next=53;break}return e.$router.push({path:"/form/utilityForm",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 53:if(!f.waterchecked){t.next=56;break}return e.$router.push({path:"/form/waterRegister",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 56:if(!f.dlchecked){t.next=59;break}return e.$router.push({path:"/form/electricityAllowed",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 59:if(!f.rqchecked){t.next=62;break}return e.$router.push({path:"/form/gasRegister",query:Object(i["a"])({},e.$route.query)}),t.abrupt("return");case 62:console.log(e.draftInfo.businessShow),t.next=66;break;case 65:e.$utils.showError("请按提示信息补充完整表单！");case 66:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},limitInput:function(e){}}},m=p,d=(r("bddc"),r("2877")),b=Object(d["a"])(m,a,n,!1,null,"cb9458ac",null);t["default"]=b.exports},bddc:function(e,t,r){"use strict";r("4e7b")}}]);