(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5579f267"],{"6b55":function(e,t,r){},9018:function(e,t,r){"use strict";r("6b55")},bfe1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"address-form"},[r("breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"test"!==e.$route.query.mode,expression:"$route.query.mode !== 'test'"}]}),e._v(" "),r("div",{staticClass:"box"},[r("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),r("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"94px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"radio",attrs:{label:"是否预约税务登记",prop:"isReservationTaxInvoice","label-width":"274px"}},[r("el-radio-group",{attrs:{disabled:""},model:{value:e.form.isReservationTaxInvoice,callback:function(t){e.$set(e.form,"isReservationTaxInvoice",t)},expression:"form.isReservationTaxInvoice"}},[r("el-radio",{attrs:{label:!0,border:""},on:{change:e.clearValidate}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:!1,border:""},on:{change:e.clearValidate}},[e._v("否")])],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"radio",attrs:{label:"是否登记为增值税一般纳税人",prop:"isRegisterTax","label-width":"274px"}},[r("el-radio",{attrs:{label:!0,border:""},on:{change:e.clearValidate},model:{value:e.form.isRegisterTax,callback:function(t){e.$set(e.form,"isRegisterTax",t)},expression:"form.isRegisterTax"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:!1,border:""},on:{change:e.clearValidate},model:{value:e.form.isRegisterTax,callback:function(t){e.$set(e.form,"isRegisterTax",t)},expression:"form.isRegisterTax"}},[e._v("否")])],1)],1)],1),e._v(" "),e.form.isRegisterTax?[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"纳税人类别",prop:"taxType","label-width":"130px"}},[r("el-select",{attrs:{placeholder:"请选择纳税人类别"},model:{value:e.form.taxType,callback:function(t){e.$set(e.form,"taxType",t)},expression:"form.taxType"}},e._l(e.taxTypeList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主营业务类别",prop:"mainBusinessCategory","label-width":"130px"}},[r("el-select",{attrs:{placeholder:"请选择主营业务类别"},model:{value:e.form.mainBusinessCategory,callback:function(t){e.$set(e.form,"mainBusinessCategory",t)},expression:"form.mainBusinessCategory"}},e._l(e.mainBusinessCategoryList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"会计核算健全",prop:"soundAccounting","label-width":"130px"}},[r("el-select",{attrs:{placeholder:"请选择会计核算健全"},model:{value:e.form.soundAccounting,callback:function(t){e.$set(e.form,"soundAccounting",t)},expression:"form.soundAccounting"}},e._l(e.soundAccountingList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},["否"!==e.form.soundAccounting?r("el-form-item",{staticClass:"effectiveDate",attrs:{label:"一般纳税人资格生效之日",prop:"effectiveDate","label-width":"130px"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.effectiveDate,callback:function(t){e.$set(e.form,"effectiveDate",t)},expression:"form.effectiveDate"}},e._l(e.effectiveDateList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()],1)],1)]:e._e(),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"发票信息"}})],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.form.invoiceInformation,"highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{property:"idcName",label:"发票种类名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectInvoiceType},model:{value:a.invoiceType,callback:function(t){e.$set(a,"invoiceType",t)},expression:"row.invoiceType"}},e._l(e.invoiceTypeList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"idcName",label:"单份发票最高开票限额",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:a.invoiceAmount,callback:function(t){e.$set(a,"invoiceAmount",t)},expression:"row.invoiceAmount"}},e._l(e.invoiceAmountList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"idcName",label:"每月最高领票数量",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{staticStyle:{width:"100px"},attrs:{disabled:"",placeholder:"请填写平台名称"},model:{value:a.quantity,callback:function(t){e.$set(a,"quantity",t)},expression:"row.quantity"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"idcName",label:"领票方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-select",{attrs:{placeholder:"请选择"},model:{value:a.ticketsWay,callback:function(t){e.$set(a,"ticketsWay",t)},expression:"row.ticketsWay"}},e._l(e.ticketsWayList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleAddInvoice(t.$index,t.row)}}},[e._v("\n                  添加\n                ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleDeleteInvoice(t.$index,t.row)}}},[e._v("\n                  删除\n                ")])]}}])})],1)],1)],1),e._v(" "),e.addedTaxInvoiceShow?r("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"增值税专用发票",prop:"addedTaxInvoice","label-width":"140px"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.addedTaxInvoice,callback:function(t){e.$set(e.form,"addedTaxInvoice",t)},expression:"form.addedTaxInvoice"}},e._l(e.addedTaxInvoiceList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"zzs-tips"},[e._v("（增值税税控系统）最高开票限额申请")])])],1):e._e(),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"购票人信息"}})],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.form.ticketBuyerInformation,"highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{property:"idcName",label:"姓名",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请填写姓名"},model:{value:a.idcName,callback:function(t){e.$set(a,"idcName",t)},expression:"row.idcName"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"idcType",label:"证件类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-select",{attrs:{placeholder:"请选择"},model:{value:a.idcType,callback:function(t){e.$set(a,"idcType",t)},expression:"row.idcType"}},e._l(e.idcTypeList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"idcNumber",label:"证件号码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{attrs:{maxlength:"18",placeholder:"请填写证件号码"},model:{value:a.idcNumber,callback:function(t){e.$set(a,"idcNumber",t)},expression:"row.idcNumber"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"phone",label:"移动电话",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-input",{staticStyle:{width:"140px"},attrs:{maxlength:"11",placeholder:"请填写移动电话"},model:{value:a.phone,callback:function(t){e.$set(a,"phone",t)},expression:"row.phone"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleAddTicketBuyer(t.$index,t.row)}}},[e._v("\n                  添加\n                ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleDeleteTicketBuyer(t.$index,t.row)}}},[e._v("\n                  删除\n                ")])]}}])}),e._v(">\n          ")],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"税务网点",prop:"taxBranch","label-width":"120px"}})],1),e._v(" "),r("el-col",{attrs:{span:20}},[r("div",{staticClass:"seal-adress-box"},[r("div",{staticClass:"seal-adress-list"},[r("el-radio-group",{model:{value:e.form.taxBranch,callback:function(t){e.$set(e.form,"taxBranch",t)},expression:"form.taxBranch"}},e._l(e.taxBranchList,(function(t,a){return r("el-radio",{key:a,staticClass:"seal-adress-item",attrs:{label:t.outletsName}},[r("div",{staticClass:"seal-adress-text"},[r("div",{staticStyle:{color:"#000"}},[e._v(e._s(t.outletsName)),r("span",{staticStyle:{"font-size":"14px"}},[e._v("（"+e._s(t.outletsAddr)+"）")])]),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",color:"#999","font-size":"15px"}},[r("span",[e._v("联系人："+e._s(t.outletsContactPerson)+" ")]),r("span",{staticStyle:{"margin-left":"20px"}},[e._v("联系电话："+e._s(t.outletsPhone))])])])])})),1)],1)])])],1),e._v(" "),r("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[r("el-button",{on:{click:function(t){return e.handleSaveDraft(!0)}}},[e._v("暂存草稿")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("上一步")]),e._v(" "),e.businessShow.yhchecked||e.businessShow.gjjchecked||e.businessShow.ylchecked||e.businessShow.sdqwchecked||e.businessShow.dlchecked?r("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步")]):r("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步，生成表单预览")])],1)],2)],1)],1)},n=[],o=(r("28a5"),r("ac6a"),r("5530")),i=r("c7eb"),s=(r("96cf"),r("1da1")),l=r("6350"),c=r("365c"),u={components:{Breadcrumb:l["a"]},data:function(){return{baseInfo:{},curArea:{},type:"",rules:{companyName:[{required:!0,message:"请填写企业名称",trigger:"change"}],isReservationTaxInvoice:[{required:!0,message:"请选择是否预约税务登记",trigger:"change"}],isRegisterTax:[{required:!0,message:"请选择是否登记为增值税一般纳税人",trigger:"change"}],taxType:[{required:!0,message:"请选择纳税人类别",trigger:"change"}],mainBusinessCategory:[{required:!0,message:"请选择主营业务类别",trigger:"change"}],soundAccounting:[{required:!0,message:"请选择会计核算健全",trigger:"change"}],effectiveDate:[{required:!0,message:"请选择一般纳税人资格生效之日",trigger:"change"}],addedTaxInvoice:[{required:!0,message:"请选择增值税专用发票",trigger:"change"}],taxBranch:[{required:!0,message:"请选择税务网点",trigger:"change"}]},taxBranchList:[],taxTypeList:["企业","非企业性单位","个体工商户","农民合作社","其他"],mainBusinessCategoryList:["工业","商业","服务业","其他"],soundAccountingList:["是","否"],effectiveDateList:["当月1日","次月1日"],invoiceTypeList:["增值税普通发票","增值税专用发票"],invoiceAmountList:["十万元"],ticketsWayList:["大厅领取"],addedTaxInvoiceList:["一千元","一万元","十万元"],idcTypeList:["中华人民共和国居民身份证"],form:{isReservationTaxInvoice:!0,isRegisterTax:!0,taxType:"",mainBusinessCategory:"",soundAccounting:"",effectiveDate:"",invoiceInformation:[{invoiceType:"",invoiceAmount:"",quantity:"25",ticketsWay:""}],addedTaxInvoice:"",ticketBuyerInformation:[{idcName:"",idcType:"",idcNumber:"",phone:""}],taxBranch:""},addedTaxInvoiceShow:!0}},computed:{draftInfo:function(){return this.$store.state.draft.draftInfo},businessShow:function(){return this.$utils.getItem("businessShow")}},activated:function(){var e=this,t=null;t=this.$utils.getItem("nameApply").areaCode,Object(c["N"])({areacode:t,serviceProvider:"税务"}).then((function(t){e.taxBranchList=t.data,console.log(e.taxBranchList)})),this.type=this.$route.query.type,this.$utils.getLocalItem("baseInfo")&&(this.baseInfo=this.$utils.getLocalItem("baseInfo")),this.$utils.getLocalItem("curArea")&&(this.curArea=this.$utils.getLocalItem("curArea")),this.$utils.getItem("draftNumber")&&this.$store.dispatch("draft/getDraftDetail",this.$utils.getItem("draftNumber")).then(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(r){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r.taxInvoice&&(a=r.taxInvoice,e.form=a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methods:{clearValidate:function(){this.$refs["form"].clearValidate()},handleSaveDraft:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(r,a){var n=Object(o["a"])(Object(o["a"])({},e.draftInfo),{},{taxInvoice:e.form,businessType:"2",showTips:t});e.$store.dispatch("draft/saveDraft",n).then((function(){r()})).catch((function(){a()}))}))},handleNext:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(r){var a,n,s,l,u,d,f,p;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.form),!r){t.next=44;break}if(a=!0,e.form.invoiceInformation.forEach((function(t){if(!t.invoiceAmount||!t.invoiceType||!t.ticketsWay)return e.$utils.showError("请将发票信息补充完整！"),void(a=!1)})),e.form.ticketBuyerInformation.forEach((function(t){return t.idcName&&t.idcType&&t.idcNumber&&t.phone?/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t.idcNumber)?/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/.test(t.phone)?void 0:(e.$utils.showError("请填写正确的手机号码"),void(a=!1)):(e.$utils.showError("请填写正确的身份证号码"),void(a=!1)):(e.$utils.showError("请将购票人信息补充完整！"),void(a=!1))})),a){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,e.handleSaveDraft();case 9:if(e.$utils.setItem("taxInvoice",e.form),n=e.draftInfo.businessShow,!n.yhchecked){t.next=14;break}return e.$router.push({path:"/form/bankAccount",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 14:if(!n.gjjchecked){t.next=17;break}return e.$router.push({path:"/form/accumulationFund",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 17:if(!n.ylchecked){t.next=20;break}return e.$router.push({path:"/form/medicalInsurance",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 20:if(!n.sdqwchecked){t.next=23;break}return e.$router.push({path:"/form/utilityForm",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 23:if(!n.waterchecked){t.next=26;break}return e.$router.push({path:"/form/waterRegister",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 26:if(!n.dlchecked){t.next=29;break}return e.$router.push({path:"/form/electricityAllowed",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 29:if(!n.rqchecked){t.next=32;break}return e.$router.push({path:"/form/gasRegister",query:Object(o["a"])({},e.$route.query)}),t.abrupt("return");case 32:console.log(e.draftInfo),s=e.draftInfo.nameApply,l=e.draftInfo.address,u=e.draftInfo.scope,d=e.draftInfo.member,f=e.draftInfo.otherInfo,p=Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},s),l),{},{scope:u},d),f),{},{industryType:{IndustryCode:s.industryFormulated.split("-")[0],IndustryName:s.industryFormulated.split("-")[2]},industryFormulated:s.industryFormulated.split("-")[1],area:s.area.join(" ")}),console.log(p),e.$loading({text:"正在获取pdf内容"}),Object(c["Y"])(p,e.$route.query.whatfrom).then((function(t){if(e.$loading().close(),500===+t.errCode||"faulted"===t.state)return e.$utils.showError("生成失败，请重试！");e.$router.push({path:"/form/preview",query:Object(o["a"])(Object(o["a"])({},e.$route.query),{},{path:t.outData.pdf})})})),t.next=45;break;case 44:e.$utils.showError("请按提示信息补充完整表单！");case 45:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleAddInvoice:function(){2!==this.form.invoiceInformation.length?this.form.invoiceInformation.push({invoiceType:"增值税普通发票",invoiceAmount:"",quantity:"25",ticketsWay:""}):this.$utils.showError("最多只能新增两条发票信息！")},handleDeleteInvoice:function(e){1!==this.form.invoiceInformation.length?this.form.invoiceInformation.splice(e,1):this.$utils.showError("最少添加一条发票信息！")},selectInvoiceType:function(){var e=this;this.addedTaxInvoiceShow=!1,this.form.invoiceInformation.forEach((function(t){"增值税专用发票"===t.invoiceType&&(e.addedTaxInvoiceShow=!0)}))},handleAddTicketBuyer:function(){this.form.ticketBuyerInformation.push({idcName:"",idcType:"",idcNumber:"",phone:""})},handleDeleteTicketBuyer:function(e){1!==this.form.ticketBuyerInformation.length?this.form.ticketBuyerInformation.splice(e,1):this.$utils.showError("最少添加一条购票人信息！")}}},d=u,f=(r("9018"),r("2877")),p=Object(f["a"])(d,a,n,!1,null,"d8678df0",null);t["default"]=p.exports}}]);