(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c520e31c"],{"0483":function(e,t,a){},"4a10":function(e,t,a){"use strict";var r=a("5c1a"),o=a.n(r),n="MIICpDCCAYygAwIBAgIQN2xznCyPSWe/5PCdX0IIETANBgkqhkiG9w0BAQsFADAOMQwwCgYDVQQLDANHNGIwHhcNMTgwNDI0MDgzOTQ4WhcNMTgwNTExMDkyMDE2WjAOMQwwCgYDVQQLDANHNGIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwxZuQ6CZk9gCs09bpk5O8iV/3yn6+dxsWhCIM5ez424TkxL6hhVXreXh9vNMDyduxhxm6DnNq5DETl3eN7VnXTcBy5DO8p99ynPR28yyFysUTQSeTkLnmcjVeVkKLGPiFoD4lh9Uk8OMVVDnFtqK21RS3V9qu09DqyLzgnMJQUgqX5/0niSBxxP7S27QvNaHJmNYHxhfx7B72L58Oq8UwFB+QRPyFgujSANdRP6pcLsZpc303Ra069uHNPUOVjzG/3sdyei4QbvH6iv5LhTLyNOXu3+olCPkRndn/aBeXDX3M6OAChSABeJ6zLrSYz0quUrkzMYD3TxvURhQPASnnAgMBAAEwDQYJKoZIhvcNAQELBQADggEBACfiY+gwI2nGt+ZipqDHmL4jLzvnUmKU+Zn6GCi3t4uIskoqtCK4cCxEgJ8FaOOk8xxJaxrdNwNQQbyYVRYgBfxWbcMCq6wasG92RvpxxQgl3olrTm6N+ELVCZ5iRI3gBlyIX/O0Twb28nWULGh0kPomVFargRPc3H+PUzboAfo7QXqASNXntGH0gre2xqEGnSl385Cbl7Qw6GtxU0UzAhJdnox142GZDBv6G+HN6NX7wqV2o+Sp61MVoY4m/M7/TvEl2zSEJAG2mmfGXwvetFCHM2E8kQvOKLMzwHcLnK16eyCQsy/auO6vK8JLdXswzHKRc+9Q1IMmmsXTxEa3Ugc=",i="-----BEGIN CERTIFICATE-----\r\n".concat(n,"\r\n-----END CERTIFICATE-----\r\n");function s(e){var t=o.a.md.md5.create();return t.update(e),t.digest().toHex()}function l(e,t,a){a="-----BEGIN PKCS7-----"+a+"-----END PKCS7-----";var r=o.a.pkcs7.messageFromPem(a),n=r.findRecipient(e);return r.decrypt(n,t),r.content}function c(e){var t=o.a.pki.certificateFromPem(i),a=o.a.pkcs7.createEnvelopedData();a.addRecipient(t),a.content=o.a.util.createBuffer(e,"utf8"),a.encrypt(null,o.a.pki.oids["des-EDE3-CBC"]);var r=o.a.pkcs7.messageToPem(a);return r}function m(){var e=o.a.pki.rsa.generateKeyPair(1024);return{pub:e.publicKey,pri:e.privateKey}}function g(e,t){var a=o.a.pki.createCertificate();a.privateKey=e,a.publicKey=t,a.validity.notBefore=new Date,a.validity.notAfter=new Date,a.validity.notAfter.setFullYear(a.validity.notBefore.getFullYear()+1);var r=[{name:"organizationName",value:"OU=G4B"}];return a.setSubject(r),a.setIssuer(r),a.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0},{name:"subjectAltName",altNames:[{type:6,value:"http://example.org/webid#me"},{type:7,ip:"127.0.0.1"}]},{name:"subjectKeyIdentifier"}]),a.sign(e),a}t["a"]={forge:o.a,md5:s,envelopeDecrypt:l,envelopeEncrypt:c,createKeypair:m,createCert:g}},6503:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAY1BMVEUAAAD///+AgP8JYf8IXf8IYv8FW/8EXP8EXv8DXv8DXP8CW/8EW/8EXP8EW/8EXP8DXP8DW/8DXP8DXP8DW/8DW/8DXP8DXP8DXP8DXP8CXP8CXP8CW/8CXP8CW/8CW/8CW/84lE3cAAAAIHRSTlMAAQIdISI4QERPWW2DhYmQmZqeoKWtv8DCw9nn7vLz/Iod5V4AAAElSURBVDjLlZXbkoIwEERPVsEYUUG5LQjO/3+lD+tuSTJhQz+mTqV6MpMeWMrkRd0O8zS0dZEb1mTLUT40ljaK5r0E6nMVzRpR1WSKg4dE9Ai8nJ4S1fO0ZK+yquviXvlHH3dbz8N5tzt7Tv58Z15tN4CbV+Xvm/hvdgQ4+i/47oVv8ABw8E9/utOnwT2AlTRYLFClwiWYMRUeTVheFJacIh0uqNPhmjYdbhnS4YE5HZ6ZwkN1NkRk0mzcAe6aDaVAuez3F9EKrCVZtdaUmAqt3THl2iBFNBooU+FSHX7pnOtEHX6+A9bAV6d+q7BEB+D0DxtEgQo3kZDpDJguEjJBfHXOtbH42haM2yJ3W5hvWxPbFtC21QZgq+XSrOzqjn2v41ldxy8qSK5G0raS7gAAAABJRU5ErkJggg=="},7:function(e,t){},7790:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-page"},[r("breadcrumb"),e._v(" "),r("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),e._m(0),e._v(" "),r("el-form",{ref:"form",staticClass:"w-1000 form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"94px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"radio",attrs:{label:"请选择身份","label-width":"110px",prop:"role"}},[r("el-radio",{attrs:{label:"法定代表人",border:""},on:{change:e.handleChangeType},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("法定代表人")]),e._v(" "),r("el-radio",{attrs:{label:"经办人",border:""},on:{change:e.handleChangeType},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[e._v("委托代理人")])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业名称",prop:"companyName"}},[r("el-input",{attrs:{placeholder:"请输入要打印证照的企业名称"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditCode","label-width":"184px"}},[r("el-input",{attrs:{placeholder:"企业的统一社会信用代码",maxlength:"20"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode",t)},expression:"form.creditCode"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"法定代表人",prop:"legalPerson","label-width":"220px"}},[r("el-input",{attrs:{placeholder:"请输入法定代表人",disabled:"法定代表人"===e.form.role},model:{value:e.form.legalPerson,callback:function(t){e.$set(e.form,"legalPerson",t)},expression:"form.legalPerson"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证件号码",prop:"legalPersonCerNo"}},[r("el-input",{attrs:{placeholder:"请输入证件号码",disabled:"法定代表人"===e.form.role,maxlength:"18"},model:{value:e.form.legalPersonCerNo,callback:function(t){e.$set(e.form,"legalPersonCerNo",t)},expression:"form.legalPersonCerNo"}})],1)],1),e._v(" "),"经办人"===e.form.role?[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"委托代理人姓名","label-width":"190px",required:""}},[r("el-input",{attrs:{placeholder:"请输入委托代理人姓名",disabled:"经办人"===e.form.role},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证件号码",required:""}},[r("el-input",{attrs:{maxlength:"18",placeholder:"请填写证件号码",disabled:"经办人"===e.form.role},model:{value:e.form.agentCerNo,callback:function(t){e.$set(e.form,"agentCerNo",t)},expression:"form.agentCerNo"}})],1)],1)]:e._e(),e._v(" "),r("el-col",{staticStyle:{"padding-top":"30px"},attrs:{span:24}},[r("el-form-item",{staticClass:"promise text-center",attrs:{"label-width":"0",prop:"promise"}},[r("el-checkbox",{model:{value:e.form.promise,callback:function(t){e.$set(e.form,"promise",t)},expression:"form.promise"}},[e._v("本人同意系统采集刷脸认证登录时的人像作为打印证照签收凭证")])],1)],1)],2),e._v(" "),r("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[r("el-button",{on:{click:e.handleSearch}},[e._v("查询")])],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.qrcodeDialog,width:"598px","close-on-click-modal":"","close-on-press-escape":"","show-close":!1},on:{"update:visible":function(t){e.qrcodeDialog=t}}},[r("div",{staticClass:"dialog-qrcode text-center"},[r("div",{staticClass:"dialog-title"},[e._v("请法定代表人/主要经营者，搜索“湖北市场监督融平台”微信小程序，或扫描下方二维码，找到授权委托申请，完成电子签名")]),e._v(" "),r("img",{attrs:{src:a("e58b"),alt:""}}),e._v(" "),r("el-button",{staticClass:"auth-btn",on:{click:function(t){e.qrcodeDialog=!1}}},[e._v("完成授权")])],1)]),e._v(" "),r("el-dialog",{staticClass:"sign_dialog",attrs:{visible:e.dialogSign,width:"500px","close-on-click-modal":"","close-on-press-escape":"","show-close":!0},on:{"update:visible":function(t){e.dialogSign=t}}},[r("div",{staticClass:"dialog_wrap"},[r("img",{staticClass:"ewm",attrs:{src:e.qrcodeImg,alt:""}}),e._v(" "),r("div",{staticStyle:{"font-size":"16px"}},[e._v("请用电子营业执照小程序扫码认证,过程中请不要关掉弹窗")])])])],1)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tips"},[r("img",{attrs:{src:a("6503")}}),e._v(" "),r("span",[e._v("法定代表人、主要经营者或委托代理人才能授权刻章、开户")])])}],n=(a("7f7f"),a("6350")),i=a("b01b"),s=a.n(i),l=a("9c3e"),c=a.n(l),m=a("b775"),g=a("4a10"),u={components:{Breadcrumb:n["a"]},data:function(){var e=this.$utils.validateField;return{printImg:c.a,search:!1,showDialog:!1,qrcodeDialog:!1,dialogSign:!1,signTimer:null,ident:"",type:1,loadingImg:s.a,printData:null,conum:"1",second:0,timer:null,form:{role:"",companyName:"",phone:"",legalPerson:"",legalPersonCerNo:"",agentName:"",agentCerNo:"",creditCode:"",promise:!1},rules:{role:[{required:!0,message:"请选择身份",trigger:"change"}],companyName:[{required:!0,message:"请填写单位名称",trigger:"change"}],creditCode:[{required:!0,message:"请填写企业的统一社会信用代码",trigger:"change"}],legalPerson:[{required:!0,message:"请填写法定代表人姓名",trigger:"change"}],legalPersonCerNo:[{required:!0,message:"请填写法定代表人证件号码",trigger:"change"},{validator:e("id")}]},printList:[],printList1:[{companyName:"咸安区荀彧餐饮店",name:"食品经营许可证",num:1,status:0},{companyName:"咸安区荀彧餐饮店",name:"食品经营许可证(副本)",num:1,status:0}],imgUrl_is:"",imgUrl_vice:"",curArea:{},qrcodeImg:"",qrid:""}},watch:{},created:function(){this.clearTimer()},mounted:function(){this.$utils.getLocalItem("curArea")&&(this.curArea=this.$utils.getLocalItem("curArea"))},beforeDestroy:function(){this.clearTimer()},methods:{hanldePrintImg:function(e){this.$router.push({path:"/printImg",query:{url:e,companyName:this.form.companyName}})},handleChangeType:function(e){var t=this.$utils.getLocalItem("userInfo");"法定代表人"===e?(this.form.agentName="",this.form.agentCerNo="",this.form.legalPerson=t.name,this.form.legalPersonCerNo=t.idNumber):(this.form.legalPerson="",this.form.legalPersonCerNo="",this.form.agentName=t.name,this.form.agentCerNo=t.idNumber)},showQRcode:function(){var e=this,t=g["a"].createKeypair(),a=g["a"].createCert(t.pri,t.pub),r=g["a"].forge.pki.certificateToPem(a),o=JSON.stringify({encCertB64:r,messageHeader:{businesstype:"003",version:"2",sign:"sign"},messageContent:{qrtype:"1101",rettype:"1",qrinfotype:"0",opertime:(new Date).getTime()}}),n=g["a"].envelopeEncrypt(o);m["a"].post("/license/getLicenseElcQrid",{envelope:n}).then((function(r){var o=g["a"].envelopeDecrypt(a,t.pri,r.envelope),n=JSON.parse(o);console.log("获取qrinfo&解密",n),console.log(n.data.message_content),200===n.code?(e.qrcodeImg="data:image/png;base64,"+n.data.message_content.qrimage,e.qrid=n.data.message_content.qrid,e.dialogSign=!0,e.setTimer()):e.$utils.showError(n.message)}))},getLicenseResult:function(){var e=this,t=g["a"].createKeypair(),a=g["a"].createCert(t.pri,t.pub),r=g["a"].forge.pki.certificateToPem(a),o=JSON.stringify({encCertB64:r,messageHeader:{businesstype:"004",version:"2",sign:"sign"},messageContent:{qrtype:"1101",rettype:"1",qrinfotype:"0",opertime:(new Date).getTime(),qrid:this.qrid}});console.log("参数&加密前".concat(o));var n=g["a"].envelopeEncrypt(o);m["a"].post("/license/getLicenseElcResult",{envelope:n}).then((function(r){var o=g["a"].envelopeDecrypt(a,t.pri,r.envelope),n=JSON.parse(o);console.log("获取结果&解密"+JSON.stringify(n)),200===+n.code?n.data.message_content.entname&&("法定代表人"===e.form.role&&(n.data.message_content.entname===e.form.companyName&&n.data.message_content.legalName===e.form.legalPerson&&n.data.message_content.uniscid===e.form.creditCode?(e.clearTimer(),e.toNext(),e.dialogSign=!1):(e.dialogSign=!1,e.clearTimer(),e.$utils.showError("认证失败"))),"经办人"===e.form.role&&(n.data.message_content.entname===e.form.companyName&&n.data.message_content.legalName===e.form.legalPerson&&n.data.message_content.uniscid===e.form.creditCode&&n.data.message_content.oper===e.form.agentName?(e.clearTimer(),e.toNext(),e.dialogSign=!1):(e.dialogSign=!1,e.clearTimer(),e.$utils.showError("认证失败")))):e.$utils.showError(n.message)})).catch((function(t){e.$utils.showError(t.message)}))},handleSearch:function(){var e=this;this.$refs["form"].validate((function(t){t?e.showQRcode():e.$utils.showError("请按提示填写必填项")}))},toNext:function(){console.log(this.form),this.$utils.setItem("authorization",this.form),"seal"===this.$route.query.type&&this.$router.push({path:"/form/subscribeSeal"}),"bank"===this.$route.query.type&&this.$router.push({path:"/form/subscribeBank"})},setTimer:function(){var e=this;this.timer=setInterval((function(){e.second<300?(e.second++,e.getLicenseResult()):e.clearTimer()}),1e3)},clearTimer:function(){clearInterval(this.timer)}}},p=u,d=(a("abbe"),a("2877")),f=Object(d["a"])(p,r,o,!1,null,"29ccd399",null);t["default"]=f.exports},"7f7f":function(e,t,a){var r=a("86cc").f,o=Function.prototype,n=/^\s*function ([^ (]*)/,i="name";i in o||a("9e1e")&&r(o,i,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},"9c3e":function(e,t,a){e.exports=a.p+"static/img/xkzImg1.75980075.png"},abbe:function(e,t,a){"use strict";a("0483")},b01b:function(e,t){e.exports="data:image/png;base64,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"},e58b:function(e,t,a){e.exports=a.p+"static/img/auth_qrcode.9f556904.png"}}]);