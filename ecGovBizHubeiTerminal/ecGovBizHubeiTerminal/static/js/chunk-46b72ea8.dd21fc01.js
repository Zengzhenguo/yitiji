(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46b72ea8"],{"1cdd":function(t,e,n){"use strict";n("26b9")},"26b9":function(t,e,n){},"70e3":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"member-form"},[n("breadcrumb"),t._v(" "),n("div",{staticClass:"box"},[n("div",{staticClass:"title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),n("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:t.form,"label-width":"84px"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.form.equipmentList,"highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{property:"idcName",label:"设备名称",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-input",{attrs:{placeholder:"请输入"},model:{value:r.name,callback:function(e){t.$set(r,"name",e)},expression:"row.name"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数量",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:r.count,callback:function(e){t.$set(r,"count",e)},expression:"row.count"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"位置",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-input",{attrs:{placeholder:"请输入"},model:{value:r.position,callback:function(e){t.$set(r,"position",e)},expression:"row.position"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("\n                  删除\n                ")])]}}])})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("div",{staticClass:"btn-box"},[n("el-button",{staticClass:"plain",on:{click:t.handleAdd}},[t._v("添加设备设施")])],1)]),t._v(" "),n("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[n("el-button",{on:{click:function(e){return t.handleSaveDraft(!0)}}},[t._v("暂存草稿")]),t._v(" "),n("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("上一步")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleNext}},[t._v("下一步")])],1)],1)],1)],1)},a=[],i=(n("7f7f"),n("5530")),o=n("c7eb"),s=(n("96cf"),n("1da1")),c=n("6350"),l={components:{Breadcrumb:c["a"]},data:function(){return{form:{equipmentList:[{name:"",count:"",position:""}]}}},computed:{draftInfo:function(){return this.$store.state.draft.draftInfo}},created:function(){var t=this;this.$utils.getItem("draftNumber")&&this.$store.dispatch("draft/getDraftDetail",this.$utils.getItem("draftNumber")).then(function(){var e=Object(s["a"])(Object(o["a"])().mark((function e(n){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.equipment&&(t.form=n.equipment);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},methods:{handleSaveDraft:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,r){var a=Object(i["a"])(Object(i["a"])({},t.draftInfo),{},{equipment:t.form,showTips:e});t.$store.dispatch("draft/saveDraft",a).then((function(){n()})).catch((function(){r()}))}))},handleAdd:function(){this.form.equipmentList.push({name:"",count:"",position:""})},handleDelete:function(t){this.form.equipmentList.splice(t,1)},handleNext:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){var e,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.form.equipmentList.length){t.next=2;break}return t.abrupt("return",this.$utils.showError("至少要添加一条信息,请先添加后再进行下一步操作"));case 2:e=JSON.parse(JSON.stringify(this.form.equipmentList)),n=0;case 4:if(!(n<e.length)){t.next=10;break}if(e[n].name&&e[n].count&&e[n].position){t.next=7;break}return t.abrupt("return",this.$utils.showError("请确认是否完善设备信息！"));case 7:n++,t.next=4;break;case 10:return t.next=12,this.handleSaveDraft();case 12:this.$router.push({path:"/form/uploadMaterial",query:Object(i["a"])({},this.$route.query)});case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=l,f=(n("1cdd"),n("2877")),d=Object(f["a"])(u,r,a,!1,null,"a49ee0ea",null);e["default"]=d.exports},"7f7f":function(t,e,n){var r=n("86cc").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||n("9e1e")&&r(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})}}]);