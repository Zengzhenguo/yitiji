(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef927c12"],{"7f7f":function(e,a,t){var r=t("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,l="name";l in n||t("9e1e")&&r(n,l,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},b1f6:function(e,a,t){},d457:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"address-form"},[t("breadcrumb"),e._v(" "),t("div",{staticClass:"box"},[t("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),t("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules,"label-width":"94px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"企业名称",prop:"companyName","label-width":"274px"}},[t("el-input",{model:{value:e.form.companyName,callback:function(a){e.$set(e.form,"companyName",a)},expression:"form.companyName"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"法定代表人",prop:"legalName","label-width":"274px"}},[t("el-input",{model:{value:e.form.legalName,callback:function(a){e.$set(e.form,"legalName",a)},expression:"form.legalName"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"法人证件号",prop:"legalIdcNum","label-width":"274px"}},[t("el-input",{model:{value:e.form.legalIdcNum,callback:function(a){e.$set(e.form,"legalIdcNum",a)},expression:"form.legalIdcNum"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"委托代理人姓名",prop:"managerName","label-width":"190px"}},[t("el-input",{attrs:{placeholder:"请输入委托代理人姓名"},model:{value:e.form.managerName,callback:function(a){e.$set(e.form,"managerName",a)},expression:"form.managerName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"代理人电话",prop:"managerPhone","label-width":"150px"}},[t("el-input",{staticStyle:{width:"290px"},attrs:{maxlength:"11",placeholder:"请填写联系方式"},model:{value:e.form.managerPhone,callback:function(a){e.$set(e.form,"managerPhone",a)},expression:"form.managerPhone"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"radio",attrs:{label:"是否办理银行开户",prop:"isOpenBankAccount","label-width":"274px"}},[t("el-radio-group",{attrs:{disabled:""},model:{value:e.form.isOpenBankAccount,callback:function(a){e.$set(e.form,"isOpenBankAccount",a)},expression:"form.isOpenBankAccount"}},[t("el-radio",{attrs:{label:!0,border:""},on:{change:e.clearValidate}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1,border:""},on:{change:e.clearValidate}},[e._v("否")])],1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行开户经办人",prop:"bankAccountManagerType","label-width":"160px"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectBankManagerType},model:{value:e.form.bankAccountManagerType,callback:function(a){e.$set(e.form,"bankAccountManagerType",a)},expression:"form.bankAccountManagerType"}},e._l(e.bankAccountManagerTypeList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":"120px"}},[t("el-input",{staticStyle:{width:"221px"},attrs:{placeholder:"请填写"},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"手机号码",prop:"phone","label-width":"120px"}},[t("el-input",{staticStyle:{width:"221px"},attrs:{maxlength:"11",placeholder:"请填写"},model:{value:e.form.phone,callback:function(a){e.$set(e.form,"phone",a)},expression:"form.phone"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"开户所在地",prop:"addressArea","label-width":"120px"}},[t("el-cascader",{ref:"addressArea",attrs:{options:e.areaList,separator:" ",disabled:"",props:{expandTrigger:"hover"},placeholder:"请选择行政区划"},on:{change:function(a){return e.handleChangeArea(a,"addressArea")}},model:{value:e.form.areaArr,callback:function(a){e.$set(e.form,"areaArr",a)},expression:"form.areaArr"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"开户银行",prop:"openBank","label-width":"120px"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectBank},model:{value:e.form.openBank,callback:function(a){e.$set(e.form,"openBank",a)},expression:"form.openBank"}},e._l(e.openBankList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.serviceProvider,value:e.serviceProvider}})})),1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"银行网点",prop:"bankBranch","label-width":"120px"}})],1),e._v(" "),t("el-col",{attrs:{span:20}},[t("div",{staticClass:"bank-adress-box"},[t("div",{staticClass:"bank-adress-list"},[t("el-radio-group",{model:{value:e.form.bankBranch,callback:function(a){e.$set(e.form,"bankBranch",a)},expression:"form.bankBranch"}},e._l(e.bankList,(function(a,r){return t("el-radio",{key:r,staticClass:"bank-adress-item",attrs:{label:a.outletsName}},[t("div",{staticClass:"bank-adress-text"},[t("div",{staticStyle:{color:"#000"}},[e._v(e._s(a.outletsName)),t("span",{staticStyle:{"font-size":"14px"}},[e._v("（"+e._s(a.outletsAddr)+"）")])]),e._v(" "),t("div",{staticStyle:{"margin-top":"10px",color:"#999","font-size":"15px"}},[t("span",[e._v("联系人："+e._s(a.outletsContactPerson)+" ")]),t("span",{staticStyle:{"margin-left":"20px"}},[e._v("联系电话："+e._s(a.outletsPhone))])])])])})),1)],1)])])],1),e._v(" "),t("el-form-item",{staticClass:"btn-group text-center",attrs:{"label-width":"0"}},[t("el-button",{on:{click:function(a){return e.$router.go(-1)}}},[e._v("上一步")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("完成")])],1)],1)],1)],1)},n=[],o=(t("a481"),t("5530")),l=t("c7eb"),s=(t("7f7f"),t("ac6a"),t("96cf"),t("1da1")),c=t("6350"),i=t("365c"),u={components:{Breadcrumb:c["a"]},data:function(){var e=this.$utils.validateField;return{baseInfo:{},curArea:{},companyType:"",type:"",areaList:[],rules:{companyName:{required:!0,message:"请填写企业名称",trigger:"blur"},legalName:{required:!0,message:"请填写法定代表人",trigger:"blur"},legalIdcNum:{required:!0,message:"请填写法人证件号",trigger:"blur"},isOpenBankAccount:[{required:!0,message:"请选择是否办理银行开户",trigger:"change"}],bankAccountManagerType:[{required:!0,message:"请选择银行开户经办人",trigger:"change"}],name:[{required:!0,message:"请填写名称",trigger:"blur"},{pattern:/[\u4e00-\u9fa5]/,message:"请填写中文字符"}],phone:[{required:!0,message:"请填写手机号码",trigger:"blur"},{pattern:/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/,message:"请填写正确的手机号码"}],openBank:[{required:!0,message:"请选择开户银行",trigger:"change"}],bankBranch:[{required:!0,message:"请选择银行网点",trigger:"change"}],managerName:[{required:!0,message:"请填写委托代理人姓名",trigger:"blur"}],managerPhone:[{required:!0,message:"请填写代理人联系方式",trigger:"blur"},{validator:e("mobile")}]},bankList:[],bankAccountManagerTypeList:["法定代表人","财务负责人","其他"],openBankList:[],form:{isOpenBankAccount:!0,bankAccountManagerType:"法定代表人",name:"",phone:"",accountOpenArea:"",openBank:"",bankBranch:"",addressArea:"",areaArr:[],addressAreaCode:"",companyName:"",legalName:"",legalIdcNum:"",managerName:"",managerPhone:""}}},computed:{draftInfo:function(){return this.$store.state.draft.draftInfo}},created:function(){},activated:function(){var e=this;this.type=this.$route.query.type,this.$utils.getLocalItem("baseInfo")&&(this.baseInfo=this.$utils.getLocalItem("baseInfo")),this.$utils.getLocalItem("curArea")&&(this.curArea=this.$utils.getLocalItem("curArea")),this.getAreaInfo().then(Object(s["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$utils.getItem("draftNumber")&&e.$store.dispatch("draft/getDraftDetail",e.$utils.getItem("draftNumber")).then(function(){var a=Object(s["a"])(Object(l["a"])().mark((function a(t){var r,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.bankOpenAccount&&(r=t.bankOpenAccount,e.form=r),t.member&&(n=t.member.memberList,n.length>0&&n.forEach((function(a){a.jobs.forEach((function(t){if("法定代表人"===t.name)return e.form.name=a.idcName,void(e.form.phone=a.phone)}))})));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),e.form.addressAreaCode&&Object(i["N"])({areacode:e.form.addressAreaCode,serviceProvider:"银行"}).then((function(a){e.openBankList=a.data||[]}));case 2:case"end":return a.stop()}}),a)}))))},methods:{clearValidate:function(){this.$refs["form"].clearValidate()},handleSaveDraft:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,r){var n=Object(o["a"])(Object(o["a"])({},e.draftInfo),{},{bankOpenAccount:e.form,businessType:"2",showTips:a});e.$store.dispatch("draft/saveDraft",n).then((function(){t()})).catch((function(){r()}))}))},getAreaInfo:function(){var e=this;return new Promise((function(a){var t={inData:{},job:"HuBei_DistCode"};e.$utils.showLoading(),e.$api.startJob(t).then(function(){var t=Object(s["a"])(Object(l["a"])().mark((function t(r){var n,o,s,c;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.curArea.areaCode,o=e.curArea.areaLabel,s={label:e.curArea.district},c=r.outData.data.filter((function(a){return a.label.trim()===e.curArea.city})),c[0].children=c[0].children.filter((function(e){return e.label.trim()===s.label.trim()})),e.areaList=[{value:"420000",label:"湖北省",children:c}],s.code=c[0].children[0].value,n.push(s.code),e.form.areaArr=n,o.push(s.label),e.form.accountOpenArea=o.join(" "),e.form.addressAreaCode=n[2],e.$utils.hideLoading(),a();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},handleChangeArea:function(e,a){this.form["".concat(a,"Code")]=e[2],this.form[a]=this.$refs[a].getCheckedNodes()[0].pathLabels.join(" ")},selectBank:function(e){var a=this;console.log(e),this.openBankList.forEach((function(t){console.log(t),t.serviceProvider===e&&(a.bankList=t.accountList)}))},selectBankManagerType:function(e){var a=this;this.form.name="",this.form.phone="";var t=this.draftInfo.member.memberList;t.length>0&&t.forEach((function(t){t.jobs.forEach((function(r){return"财务负责人"===r.name&&"财务负责人"===e||"法定代表人"===r.name&&"法定代表人"===e?(a.form.name=t.idcName,void(a.form.phone=t.phone)):void 0}))}))},handleNext:function(){var e=this;this.$refs["form"].validate(function(){var a=Object(s["a"])(Object(l["a"])().mark((function a(t){var r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t?(r={lltData:{managerName:e.form.managerName,managerPhone:e.form.managerPhone,channelToken:e.$utils.getLocalItem("token"),companyName:e.form.companyName,legalName:e.form.legalName,legalIdcNum:e.form.legalIdcNum,bankOpenAccount:e.form||{},addressArea:e.form.accountOpenArea}},console.log(r),Object(i["ob"])(r).then(function(){var a=Object(s["a"])(Object(l["a"])().mark((function a(t){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(500!==+t.errCode&&"faulted"!==t.state){a.next=3;break}return e.$loading().close(),a.abrupt("return",e.$utils.showError("提交失败，请重试！"));case 3:e.$utils.removeItem("authorization"),e.$utils.showSuccess("提交成功"),e.$router.replace("/");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())):e.$utils.showError("请按提示信息补充完整表单！");case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}},m=u,p=(t("f558"),t("2877")),f=Object(p["a"])(m,r,n,!1,null,"13218d62",null);a["default"]=f.exports},f558:function(e,a,t){"use strict";t("b1f6")}}]);